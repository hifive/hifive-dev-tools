/* Copyright (C) 2012-2014 NS Solutions Corporation. Licensed under the Apache License, Version 2.0. hifive version 1.1.11 gitCommitId ac66d024ac5f7945cb77818674fc23e923aa9b23 (util,controller,modelWithBinding,view,ui,api.geo,api.sqldb,api.storage) */
(function(a){function d(a,d,k){var o=null,z=bb[a],I=ib[a];I&&(o=I(a,z,d,k));!o&&z&&(o=f.u.str.format.apply(null,[z].concat(d)));o&&(o+="(code="+a+")");d=o?Error(o):Error("FwError: code = "+a);a&&(d.code=a);k&&(d.detail=k);throw d;}function Z(a,d,k){var o=null,z=bb[a];z&&(d=[z].concat(d),o=f.u.str.format.apply(null,d));return{code:a,message:o,detail:k}}function L(a){return null==a?a:J(a)?a:[a]}function $(a){var d=document.createElement("span");d.innerHTML='<a href="'+a+'" />';return d.firstChild.href}
function x(a){return"string"===typeof a}function la(a){return a.isRejected?a.isRejected():"rejected"===a.state()}function Ca(a){return a.isResolved?a.isResolved():"resolved"===a.state()}function ia(a){return!x(a)?!1:!!a.match(/^[A-Za-z_\$][\w|\$]*$/)}function ma(d){if("regexp"===a.type(d))return d;var f="",f=-1!==d.indexOf("*")?a.map(d.split("*"),function(a){return a.replace(/\W/g,"\\$&")}).join(".*"):d;return RegExp("^"+f+"$")}function sa(a,d,f){a&&(a._h5UnwrappedCall?a._h5UnwrappedCall(d,f):a[d](f))}
function X(d,f,k,o){return d[a.hasOwnProperty("curCSS")?"pipe":"then"](f,k,o)}function S(a){return typeof a.nodeType===ja?a.document&&a.document.nodeType===Ga&&Y(a.document)===a?a.document:null:a.nodeType===Ga?a:a.ownerDocument}function Y(a){return window.document===a?window:a.defaultView||a.parentWindow}function Ha(a,d,k,o){function z(){!s&&++j===p&&d&&d()}function I(){s=!0;k?k.apply(this,arguments):o&&f.settings.commonFailHandler&&f.settings.commonFailHandler.call(this,arguments)}var v=a.length,
D=f.async.isPromise;if(1===v){v=a[0];if(D(v)){v.done(d);k?v.fail(k):o&&f.settings.commonFailHandler&&v.fail(f.settings.commonFailHandler);return}v=0}if(0===v)d();else{for(var u=[],w=0,r=a.length;w<r;w++)v=a[w],D(v)&&u.push(v);var p=u.length;if(0===p)d&&d();else for(var j=0,s=!1,w=0;w<p;w++)u[w].done(z).fail(I)}}var cb=void 0;if(window.h5){if(window.h5.env&&"1.1.11"===window.h5.env.version)return;cb=window.h5}var f={};window.h5=f;f.coexist=function(){window.h5=cb;return f};f.env={version:"1.1.11"};
var bb={},ib={},ja="undefined",U=1,Ga=9,J=Array.isArray||function(){var a=Object.prototype.toString;return function(d){return"[object Array]"===a.call(d)}}(),M=function(){if("function"===typeof RegExp()){var a=Object.prototype.toString;return function(d){return"[object Function]"===a.call(d)}}return function(a){return"function"===typeof a}}(),db={controllerInternal:null},eb;(function(){function h(a){switch(a){case "string":return"s";case "number":return"n";case "boolean":return"b";case "String":return"S";
case "Number":return"N";case "Boolean":return"B";case "infinity":return"i";case "-infinity":return"I";case "nan":return"x";case "date":return"d";case "regexp":return"r";case "array":return"a";case "object":return"o";case "null":return"l";case u:return"u";case "undefElem":return"_";case "objElem":return"@"}}function C(a,b){if(x(a)){var c=a;b&&(c=c.replace(/\\n/g,"\n").replace(/\\r/g,"\r"));return c=c.replace(/\\/g,"\\\\").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/[\b]/g,"\\b").replace(/\f/g,
"\\f").replace(/\t/g,"\\t")}return a instanceof String?new String(C(a.toString())):a}function k(a,b){return"1"===b?a:x(a)?a.replace(/\\\\/g,"\\-").replace(/\\b/g,"").replace(/\\f/g,"").replace(/\\n/g,"\n").replace(/\\r/g,"\r").replace(/\\t/g,"\t").replace(/\\-/g,"\\"):a instanceof String?new String(k(a.toString())):a}function o(a,b,c){var e=f.async.deferred();f.ajax({url:a,async:b,cache:c,dataType:"script",converters:{"text script":function(a){return a}}}).done(function(){var a=D(arguments);a.push(this.url);
e.notifyWith(e,a);e.resolveWith(e,a)}).fail(function(){e.rejectWith(e,D(arguments))});return e.promise()}function z(a){x(a)||d(w,"h5.u.obj.ns()");for(var a=a.split("."),b=a.length,c=0;c<b;c++)ia(a[c])||d(w,"h5.u.obj.ns()");for(var e=window,c=0;c<b;c++){var F=a[c];typeof e[F]===u&&(e[F]={});e=e[F]}return e}function I(a,b){var c=z(a),e;for(e in b)b.hasOwnProperty(e)&&(void 0!==c[e]&&d(r,[a,e]),c[e]=b[e])}function v(b){return!b||!b.jquery?!1:b.jquery===a().jquery}function D(a){return Array.prototype.slice.call(a)}
var u="undefined",w=11E3,r=11001,p=11004,j=11005,s=11006,B={},c={"&":"&amp;",'"':"&quot;","<":"&lt;",">":"&gt;","'":"&#39;"},b=void 0!==document.createElement("script").onload,g=-1===/\r\n/.toString().indexOf("\r\n");I("h5.u",{loadScript:function(c,g){var r=f.async.deferred,e=L(c);(!e||0===e.length)&&d(11007);for(var F=0,O=e.length;F<O;F++)c=e[F],(!x(c)||!a.trim(c))&&d(11007);null!=g&&!a.isPlainObject(g)&&d(11008,"h5.u.loadScript()");var m=g&&!1===g.async?!1:!0,j=!!(g&&!0===g.force),F=!!(g&&!0===
g.parallel),s=!!(g&&!0===g.atomic),h=!j,k=m?r():null,v=m?function(a){k.reject(Z(11010,[a]))}:null,O=m?function(){var a=r();setTimeout(function(){a.resolve([])},0);return a.promise()}:null,z=F?[]:null,u=[],p={};if(m){if(!s&&b){var w=a("head"),C=function(a){var e=r(),b=document.createElement("script");b.onload=function(){b.onload=null;B[a]=a;e.resolve()};b.onerror=function(){b.onerror=null;e.reject(a)};b.type="text/javascript";b.src=h?a:a+(-1<a.indexOf("?")?"&_":"?_")+ +new Date;w[0].appendChild(b);
return e.promise()};if(F)z.push(O()),a.each(e,function(){var a=$(this);if(!j&&a in B)return!0;z.push(C(a))}),Ha(z,function(){k.resolve()},v);else{var I=X(r().resolve(),O);a.each(e,function(){var a=$(this);I=X(I,function(){if(j||!(a in B))return C(a)},v)});X(I,function(){k.resolve()},v)}}else if(F){var q=[];z.push(O());q.push(null);a.each(e,function(){var a=$(this);if(!j&&(a in B||a in p))return!0;z.push(o(a,m,h));s?p[a]=a:q.push(null)});F=e=null;s?(e=function(){a.each(D(arguments),function(e,b){a.globalEval(b[0])});
a.extend(B,p);k.resolve()},F=a.noop):(e=function(){k.resolve()},F=function(){for(var e=D(arguments),b=0;b<q.length;b++)if(e[b]){var c=e[b][3];q[b]!==c&&(a.globalEval(e[b][0]),q.splice(b,1,c))}});f.async.when(z).done(e).fail(v).progress(F)}else I=X(r().resolve(),O),a.each(e,function(){var e=$(this);I=X(I,function(){var b=r();!j&&(e in B||e in p)?b.resolve():o(e,m,h).done(function(c){s?(u.push(c),p[e]=e):(a.globalEval(c),B[e]=e);b.resolve()}).fail(function(){b.reject(this.url)});return b.promise()},
v)}),X(I,function(){s&&(a.each(u,function(e,b){a.globalEval(b)}),a.extend(B,p));k.resolve()},v);return k.promise()}a.each(e,function(){var e=$(this);if(!j&&(e in B||e in p))return!0;o(e,m,h).done(function(b){s?(u.push(b),p[e]=e):(a.globalEval(b),B[e]=e)}).fail(function(){d(11010,[e])})});s&&(a.each(u,function(e,b){a.globalEval(b)}),a.extend(B,p))},createInterceptor:function(a,b){return function(c){var e={},d=a?a.call(this,c,e):c.proceed();c.result=d;if(!b)return d;if(d&&M(d.promise)&&!v(d)){var g=
this;sa(d,"always",function(){b.call(g,c,e)});return d}b.call(this,c,e);return d}}});I("h5.u.str",{startsWith:function(a,b){return 0===a.lastIndexOf(b,0)},endsWith:function(a,b){var c=a.length-b.length;return 0<=c&&a.lastIndexOf(b)===c},format:function(a,b){if(null==a)return"";var c=arguments;return a.replace(/\{(\d+)\}/g,function(a,b){var d=c[parseInt(b,10)+1];return typeof d===u?u:d})},escapeHtml:function(b){return"string"!==a.type(b)?b:b.replace(/[&"'<>]/g,function(a){return c[a]})}});I("h5.u.obj",
{expose:I,ns:z,serialize:function(b){function c(a){for(var b=0,e=F.length;b<e;b++)if(a===F[b])return!0;return!1}function r(a){for(var b=0,e=F.length;b<e;b++)a===F[b]&&F.splice(b,1)}function e(b){var m=b,l=a.type(b);"object"===typeof b&&(b instanceof String?l="String":b instanceof Number?l="Number":b instanceof Boolean&&(l="Boolean"));switch(l){case "String":case "string":m=h(l)+C(m);break;case "Boolean":m=m.valueOf();case "boolean":m=h(l)+(m?1:0);break;case "Number":m=m.valueOf();if(a.isNaN&&a.isNaN(b)||
a.isNumeric&&!a.isNumeric(b))m=Infinity===b.valueOf()?h("infinity"):-Infinity===b.valueOf()?h("-infinity"):h("nan");m=h(l)+m;break;case "number":m=a.isNaN&&a.isNaN(b)||a.isNumeric&&!a.isNumeric(b)?Infinity===b?h("infinity"):-Infinity===b?h("-infinity"):h("nan"):h(l)+m;break;case "regexp":m=h(l)+C(m.toString(),g);break;case "date":m=h(l)+ +m;break;case "array":c(b)&&d(ERR_CODE_REFERENCE_CYCLE);F.push(b);for(var s=[],m=h(l)+"[",l=0,f=b.length;l<f;l++){s[l.toString()]=!0;var o;o=b.hasOwnProperty(l)?
"function"===a.type(b[l])?h(u):e(b[l]).replace(/\\/g,"\\\\").replace(/"/g,'\\"'):h("undefElem");m+='"'+o+'"';l!==b.length-1&&(m+=",")}var l="",k;for(k in b)s[k]||"function"!==a.type(b[k])&&(l+='"'+C(k)+'":"'+e(b[k]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');l&&(m+=(b.length?",":"")+'"'+h("objElem")+"{"+l.replace(/\\/g,"\\\\").replace(/"/g,'\\"'),m=m.replace(/,$/,""),m+='}"');m+="]";r(b);break;case "object":c(b)&&d(j);F.push(b);m=h(l)+"{";for(k in b)b.hasOwnProperty(k)&&"function"!==a.type(b[k])&&
(m+='"'+k+'":"'+e(b[k]).replace(/\\/g,"\\\\").replace(/"/g,'\\"')+'",');m=m.replace(/,$/,"");m+="}";r(b);break;case "null":case u:m=h(l)}return m}M(b)&&d(11002);var F=[];return"2|"+e(b)},deserialize:function(b){function c(b){function l(a){switch(a){case "s":return"string";case "n":return"number";case "b":return"boolean";case "S":return"String";case "N":return"Number";case "B":return"Boolean";case "i":return"infinity";case "I":return"-infinity";case "x":return"nan";case "d":return"date";case "r":return"regexp";
case "a":return"array";case "o":return"object";case "l":return"null";case "u":return u;case "_":return"undefElem";case "@":return"objElem"}}b.match(/^(.)(.*)/);b=RegExp.$1;e=RegExp.$2?RegExp.$2:"";if(void 0!==b&&""!==b)switch(l(b)){case "String":e=new String(k(e,g));break;case "string":break;case "Boolean":"0"===e||"1"===e?e=new Boolean("1"===e):d(s);break;case "boolean":"0"===e||"1"===e?e="1"===e:d(s);break;case "nan":""!==e&&d(s);e=NaN;break;case "infinity":""!==e&&d(s);e=Infinity;break;case "-infinity":""!==
e&&d(s);e=-Infinity;break;case "Number":"infinity"===l(e)?e=new Number(Infinity):"-infinity"===l(e)?e=new Number(-Infinity):"nan"===l(e)?e=new Number(NaN):(e=new Number(e),isNaN(e.valueOf())&&d(s));break;case "number":e=(new Number(e)).valueOf();isNaN(e)&&d(s);break;case "array":var r;try{r=a.parseJSON(e)}catch(j){d(s)}J(r)||d(s);for(var f=0;f<r.length;f++)switch(l(r[f].substring(0,1))){case "undefElem":delete r[f];break;case "objElem":for(var o=c(h("object")+r[f].substring(1)),b=[],f=0,B=r.length-
1;f<B;f++)b[f]=r[f];r=b;for(var v in o)r[v]=o[v];break;default:r[f]=c(r[f])}e=r;break;case "object":try{r=a.parseJSON(e)}catch(z){d(s)}a.isPlainObject(r)||d(s);for(v in r)r[v]=c(r[v]);e=r;break;case "date":e=new Date(parseInt(e,10));break;case "regexp":try{f=e.match(/^\/(.*)\/(.*)$/),o=k(f[1],g),e=RegExp(o,f[2])}catch(w){d(s)}break;case "null":""!==e&&d(s);e=null;break;case u:""!==e&&d(s);e=void 0;break;default:d(p)}return k(e,g)}x(b)||d(11009);b.match(/^(.)\|(.*)/);var g=RegExp.$1;"1"!==g&&"2"!==
g&&d(11003,[g,"2"]);var e=RegExp.$2;return c(e)},isJQueryObject:v,argsToArray:D,getByPath:function(a,b){x(a)||d(w,"h5.u.obj.getByPath()");var c=a.split("."),e=0;if("window"===c[0]&&(!b||b===window))e=1;for(var g=b||window,r=c.length;e<r&&!(g=g[c[e]],null==g);e++);return g}})})();(function(){function h(a,d){a.target||(a.target=d);a.timeStamp||(a.timeStamp=(new Date).getTime());if(!a.isDefaultPrevented){var f=!1;a.isDefaultPrevented=function(){return f};a.preventDefault=function(){f=true}}if(!a.isImmediatePropagationStopped){var h=
!1;a.isImmediatePropagationStopped=function(){return h};a.stopImmediatePropagation=function(){h=true}}}function C(a){var d={},h;for(h in a){var k=a[h];if(a.hasOwnProperty(h)&&(M(k)||null===k||"string"===typeof k||"number"===typeof k||"boolean"===typeof k))d[h]=k}this._mix=function(a){for(var f in d)a[f]=d[f]};this._hasInterface=function(a){for(var h in d)if(!f.u.str.startsWith(h,"_")&&typeof a[h]===ja)return!1;return!0}}function k(a){return new C(a)}a.extend(C.prototype,{mix:function(a){return this._mix(a)},
hasInterface:function(a){return this._hasInterface(a)}});f.u.obj.expose("h5.mixin",{createMixin:k,eventDispatcher:k({hasEventListener:function(a,d){if(!this._eventListeners)return!1;var f=this._eventListeners[a];if(!f||!this._eventListeners.hasOwnProperty(a))return!1;for(var h=0,k=f.length;h<k;h++)if(f[h]===d)return!0;return!1},addEventListener:function(a,f){(2>arguments.length||!x(a))&&d(16E3);null==f||this.hasEventListener(a,f)||(this._eventListeners||(this._eventListeners={}),this._eventListeners.hasOwnProperty(a)||
(this._eventListeners[a]=[]),this._eventListeners[a].push(f))},removeEventListener:function(a,d){if(this.hasEventListener(a,d))for(var f=this._eventListeners[a],h=0,k=f.length;h<k;h++)if(f[h]===d){f.splice(h,1);break}},dispatchEvent:function(a){if(this._eventListeners){var d=this._eventListeners[a.type];if(d){d=d.slice(0);h(a,this);for(var f=0,k=d.length;f<k&&!a.isImmediatePropagationStopped();f++)M(d[f])?d[f].call(a.target,a):d[f].handleEvent&&d[f].handleEvent(a);return a.isDefaultPrevented()}}}})})})();
(function(){var h,C,k,o,z,I,v;function D(a){return a.match(/^error$/i)?h:a.match(/^warn$/i)?C:a.match(/^info$/i)?k:a.match(/^debug$/i)?o:a.match(/^trace$/i)?z:a.match(/^all$/i)?I:a.match(/^none$/i)?v:null}function u(a,b){var c={};if(J(a)){var d=a.slice(0,3).join(" <- ");0<a.slice(3).length&&(d+=" ...");c.recent=d;c.all=b.join("\n")}else c.recent=a,c.all=b;return c}function w(a){var b="";a.name?b=a.name:(/^\s*function\s*([\w\-\$]+)?\s*\(/i.test(a.toString()),b=RegExp.$1);return b}function r(b){for(var b=
f.u.obj.argsToArray(b),c=[],d=0,g=b.length;d<g;d++)c.push(a.type(b[d]));return c.join(", ")}function p(){}function j(e){(!x(e)||0===a.trim(e).length)&&d(b);this.category=a.trim(e)}var s=10002,B=10003,c=10004,b=10005,g=10007,l=10008,N=10010;h=50;C=40;k=30;o=20;z=10;I=0;v=-1;var G=null;p.prototype={init:function(){},log:function(a){window.console&&(x(a.args[0])?this._logMsg(a):this._logObj(a))},_logMsg:function(a){var b=a.args,c=null,c=1===b.length?b[0]:f.u.str.format.apply(f.u.str,b),b=this._getLogPrefix(a)+
c;a.logger.enableStackTrace&&(b+="  ["+a.stackTrace.recent+"]");a.logger.enableStackTrace&&console.groupCollapsed?console.groupCollapsed(b):this._consoleOut(a.level,b);a.logger.enableStackTrace&&this._consoleOut(a.level,a.stackTrace.all);a.logger.enableStackTrace&&console.groupEnd&&console.groupEnd()},_consoleOut:function(a,b){var c=!1;a==h&&console.error?(console.error(b),c=!0):a==C&&console.warn?(console.warn(b),c=!0):a==k&&console.info?(console.info(b),c=!0):a==o&&console.debug&&(console.debug(b),
c=!0);!c&&console.log&&console.log(b)},_getLogPrefix:function(a){return"["+a.levelString+"]"+a.date.getHours()+":"+a.date.getMinutes()+":"+a.date.getSeconds()+","+a.date.getMilliseconds()+": "},_logObj:function(a){var b=a.args,c=this._getLogPrefix(a);b.unshift(c);a.level==h&&console.error?this._output(console.error,b):a.level==C&&console.warn?this._output(console.warn,b):a.level==k&&console.info?this._output(console.info,b):a.level==o&&console.debug?this._output(console.debug,b):this._output(console.log,
b)},_output:function(a,b){try{if(a.apply){a.apply(console,b);return}}catch(c){}a(b)}};j.prototype={enableStackTrace:!1,maxStackSize:10,error:function(a){this._log(h,arguments,this.error)},warn:function(a){this._log(C,arguments,this.warn)},info:function(a){this._log(k,arguments,this.info)},debug:function(a){this._log(o,arguments,this.debug)},trace:function(a){this._log(z,arguments,this.trace)},_traceFunctionName:function(b){var c=Error(),d=c.stack||c.stacktrace,c=[],g={};if(d)var c=d.replace(/\r\n/,
"\n").replace(/at\b|@|Error\b|\t|\[arguments not available\]/ig,"").replace(/(http|https|file):.+[0-9]/g,"").replace(/ +/g," ").split("\n"),f=null,c=a.map(c,function(b){return f=0===b.length?null:""===a.trim(b)?"{anonymous}":a.trim(b)}),g=u(c.slice(3,c.length),c.slice(0,this.maxStackSize));else{d=null;try{d=b.caller}catch(l){}b=0;if(d)for(;;){var j=r(d.arguments),h=w(d),k=null;try{k=d.caller}catch(s){c.push("{unable to trace}");g=u(c,c);break}h?c.push("{"+h+"}("+j+")"):k?c.push("{anonymous}("+j+")"):
c.push("{root}("+j+")");if(!k||b>=this.maxStackSize){g=u(c,c);break}d=k;b++}else g=u("{unable to trace}","{unable to trace}")}return g},_log:function(a,b,c){var b={level:a,args:f.u.obj.argsToArray(b),stackTrace:this.enableStackTrace?this._traceFunctionName(c):""},d=G.out,g=G.defaultOut,c=null;if(d)for(var d=L(d),r=0,l=d.length;r<l;r++){var j=d[r];if(j.compiledCategory.test(this.category)){c=j;break}}c||(c=g);r=c.compiledLevel;c=c.compiledTargets;if(!(a<r||0>r))if(b.logger=this,b.date=new Date,b.levelString=
this._levelToString(a),c&&0!==c.length){r=0;for(l=c.length;r<l;r++)c[r].log(b)}},_levelToString:function(a){if(a===h)return"ERROR";if(a===C)return"WARN";if(a===k)return"INFO";if(a===o)return"DEBUG";if(a===z)return"TRACE"}};f.u.obj.expose("h5.log",{createLogger:function(a){return new j(a)},configure:function(){function b(e,f,h){var k=null==h;if(!k){var m=f.category;(!x(m)||0===a.trim(m).length)&&d(N);m=a.trim(m);-1!==a.inArray(m,j)&&d(s,f.category);f.compiledCategory=ma(m);j.push(m)}m=null==f.level?
D(k?r.level:h.level):x(f.level)?D(a.trim(f.level)):f.level;"number"!==typeof m&&d(B,f.level);f.compiledLevel=m;var m=[],o=f.targets;if(!k||null!=o){var q=[];null==o||J(o)||x(o)&&a.trim(o).length||d(l);for(var o=L(o),y=0,H=o.length;y<H;y++){null==o[y]||x(o[y])&&a.trim(o[y]).length||d(l);var t=o[y];if(t){-1!==a.inArray(t,q)&&d(g,t);var p=e[t];p||d(c,t);q.push(t);m.push(p.compiledTarget)}}if(!k&&(e=h.targets,null!=e)){e=L(e);y=0;for(H=e.length;y<H;y++)t=e[y],-1===a.inArray(t,q)&&(m.push(h.compiledTargets[y]),
q.push(t))}}f.compiledTargets=m}var r={level:"NONE",targets:null},j=[],h=a.extend(!0,{},f.settings.log?f.settings.log:{defaultOut:r}),k=h.target;k||(k={},h.target=k);(function(b){a.isPlainObject(b)||d(10009);for(var c in b){var e=b[c];a.type(e.type)!=="object"&&e.type!=="console"&&d(1E4);var r=null,r=e.type==="console"?new p:a.extend(true,{},e.type);r.init&&r.init(e);e.compiledTarget=r}b.console={type:"console",compiledTarget:new p}})(k);var o=h.defaultOut;o||(o=r,h.defaultOut=o);b(k,o);var w=h.out;
if(w)for(var w=L(w),u=0,v=w.length;u<v;u++)b(k,w[u],o);G=h}})})();(function(){function d(h){f.settings.aspects=a.map(L(h),function(a){a.target&&(a.compiledTarget=ma(a.target));a.pointCut&&(a.compiledPointCut=ma(a.pointCut));return a})}f.u.obj.ns("h5.settings");f.settings={commonFailHandler:null,aspects:null,log:null,listenerElementType:1,dynamicLoading:{retryCount:3,retryInterval:500},ajax:{retryCount:0,retryInterval:500,retryFilter:function(a){a=a.status;if("POST"===this.type||!(0===a||12029===a))return!1}},
trackstartTouchAction:"none"};var C=f.u.createInterceptor(function(a,d){this.log.info("{0}.{1}が開始されました。",this.__name,a.funcName);this.log.info(a.args);d.start=new Date;return a.proceed()},function(a,d){var f=(new Date).getTime()-d.start.getTime();this.log.info("{0}.{1}が終了しました。 Time={2}ms",this.__name,a.funcName,f)});f.u.obj.expose("h5.core.interceptor",{lapInterceptor:C,logInterceptor:C,errorInterceptor:function(a){var d=null;try{d=a.proceed()}catch(h){f.settings.commonFailHandler&&M(f.settings.commonFailHandler)&&
f.settings.commonFailHandler.call(null,h)}return d}});a(document).trigger("h5preinit");f.settings.aspects&&d(f.settings.aspects);f.log.configure()})();(function(){f.u.obj.expose("h5.env",{ua:function(d){function f(a,b){var c=F(a,"[^;)]*",b).split(" ");return 1===c.length?"":c[c.length-1]}function k(a,b){var c=F(a,"[^;) ]*",b).split("/");return 1===c.length?"":c[c.length-1]}function o(a,b){var c=F(a,"[^;) ]*",b).split(":");return 1===c.length?"":c[c.length-1]}var z=!!d.match(/iPhone/i),x=!!d.match(/iPad/i),
v=z||x,D=!!d.match(/android/i),u=!!d.match(/Windows Phone/i),w=!!d.match(/MSIE/)||!!d.match(/Trident/),r=!!d.match(/Firefox/i),p=!!d.match(/Chrome/i)||!!d.match(/CrMo/)||!!d.match(/CriOS/),j=!D&&!!d.match(/Safari/i)&&!p,s=!!d.match(/Webkit/i),B=!!d.match(/Opera/i),c=D&&!!d.match(/Safari/i)&&!p,b=!(!z&&!u&&!(c&&d.match(/Mobile/)&&!d.match(/SC-01C/)||D&&p&&d.match(/Mobile/)||d.match(/Fennec/i)||d.match(/Opera Mobi/i))),g=!(!x&&!(c&&!d.match(/Mobile/)||D&&p&&!d.match(/Mobile/)||d.match(/SC-01C/)||d.match(/Fennec/i)||
d.match(/Opera Tablet/i))),l=!b&&!g,N=null,G=null,e=function(b,c){return a.trim(d.substring(d.indexOf(b)+b.length,d.indexOf(c))).split("_")},F=function(b,c,e){return a.trim(d.match(!1===e?RegExp(b+c):RegExp(b+c,"i")))};if(z)G=e("iPhone OS","like"),N=parseInt(G[0]),G=G.join(".");else if(x)G=e("CPU OS","like"),N=parseInt(G[0]),G=G.join(".");else if(!D||!r)D?(G=f("Android"),N=parseInt(G.split(".")[0])):u&&((G=f("Windows Phone OS"))||(G=f("Windows Phone")),N=parseInt(G.split(".")[0]));w&&B&&(w=!1);var O=
e=null;if(v||D&&c)e=N,O=G;else{var m=null;w?m=f("MSIE",!1)||o("rv"):p?(m=k("Chrome",!1))||(m=k("CrMo",!1)):j?m=k("Version"):r?m=k("Firefox"):B&&((m=k("Version"))||(m=k("Opera")),m||(m=f("Opera")));m&&(e=parseInt(m.split(".")[0]),O=m)}return{osVersion:N,osVersionFull:G,browserVersion:e,browserVersionFull:O,isiPhone:z,isiPad:x,isiOS:v,isAndroid:D,isWindowsPhone:u,isIE:w,isFirefox:r,isChrome:p,isSafari:j,isOpera:B,isAndroidDefaultBrowser:c,isSmartPhone:b,isTablet:g,isDesktop:l,isWebkit:s}}(navigator.userAgent)})})();
(function(){function h(a){function d(){f=!0;k=this;h=v(arguments);if(la(a)||Ca(a))return a;var b=v(arguments);if(0<c.length)for(var g=0,l=c.length;g<l;g++){var o=b;o!==arguments&&(o=L(o));M(c[g])&&c[g].apply(this,o)}return a}var f=!1,k=null,h=null,c=[];a.progress=function(){for(var b=v(arguments),d=0,l=b.length;d<l;d++){var o=b[d];if(J(o))a.progress.apply(this,o);else if(M(o))if(f){var p=h;p!==h&&(p=L(p));o.apply(k,p)}else c.push(o)}return this};a.notify=d;a.notifyWith=function(a,c){return!c?d.apply(a):
d.apply(a,c)}}function C(a){if(!a)return!1;for(var a=L(a),d=0,f=a.length;d<f;d++)if(M(a[d]))return!0;return!1}function k(d,p){function j(a){p?p[a]&&(d[a]=p[a]):(g[a]=d[a],d[a]=function(){return function(){if(!c){var b=v(arguments);if("then"===a||"pipe"===a)b=b[1];C(b)&&(c=!0)}return d._h5UnwrappedCall.call(this,a,v(arguments))}}(a),l[a]=d[a])}function s(a){return function(){var e=f.settings.commonFailHandler;!c&&e&&!b&&(d.fail.call(this,e),b=!0);return a.apply(this,arguments)}}if(d._h5UnwrappedCall)return d;
var B=!!d.progress;!B&&!w(d)?h(d):p&&(d.progress=p.progress);var c=!1,b=!1,g={},l={};d._h5UnwrappedCall=p?p._h5UnwrappedCall:function(b,c){c=L(c);a.extend(d,g);var e=d[b].apply(this,c);a.extend(d,l);return e};for(var u=0,G=o.length;u<G;u++){var e=o[u];d[e]&&j(e)}d.pipe&&!p&&(d.pipe=function(){for(var a=f.async.deferred(),b=v(arguments),d=0,c=z.length;d<c;d++){var e=this;(function(b,d,c){function f(){if(g){var d=b.apply(this,arguments);if(d&&M(d.promise)){k(d);d.done(a.resolve);d._h5UnwrappedCall("fail",
a.reject);M(d.progress)&&d.progress(a.notify)}else a[c+"With"](this,[d])}else a[c+"With"](this,arguments)}var g=M(b);if(!g&&d==="fail")e._h5UnwrappedCall(d,f);else e[d](f)})(b[d],z[d],x[d])}return a.promise()},l.pipe=d.pipe);if(d.then&&!p){var F=d.then;d.then=D?d.pipe:function(){var a=arguments,b=F.apply(this,a);!B&&C(a[2])&&d.progress.call(d,a[2]);return b};l.then=d.then}d.reject&&(d.reject=p&&p.reject?p.reject:s(d.reject));d.rejectWith&&(d.rejectWith=p&&p.rejectWith?p.rejectWith:s(d.rejectWith));
if(d.promise)if(p&&p.promise)d.promise=p.promise;else{var O=d.promise;d.promise=function(){return k(O.apply(this,arguments),d)}}return d}var o=["fail","always","pipe","then"],z=["done","fail","progress"],x=["resolve","reject","notify"],v=f.u.obj.argsToArray,D=function(){var d=a.Deferred();return d!==d.then()}(),u=function(){var d=a.Deferred();return k(d)},w=function(a){return!!a&&a.done&&a.fail&&!a.resolve&&!a.reject};f.u.obj.expose("h5.async",{deferred:u,when:function(){var d=v(arguments);1===d.length&&
J(d[0])&&(d=d[0]);var k=d.length,j=f.async.deferred(),h=j.promise(),o=a.when.apply(a,d).done(function(){j.resolveWith(this&&this.promise&&this.promise()===o?j:this,v(arguments))}).fail(function(){j.rejectWith(this,v(arguments))});if(o.progress)o.progress(function(){j.notifyWith(this===o?h:this,v(arguments))});else{for(var c=[],b=0;b<k;b++)c[b]=void 0;for(var g=function(a){return function(b){c[a]=1<arguments.length?v(arguments):b;j.notifyWith(h,c)}},b=0;b<k;b++){var l=d[b];l&&M(l.promise)&&l.progress&&
(1<k?l.progress(g(b)):l.progress(function(){j.notifyWith(h,v(arguments))}))}}return h},isPromise:w,loop:function(f,k,j){J(f)||d(5E3);var h=u(),o="number"===a.type(j)?j:20,c=0,b=f.length,g,l=null,v=function(){if(c===b)h.resolve(f);else{var a=k.call(f,c,f[c],l);c++;w(a)?a.done(function(){g()}).fail(function(){h.reject(f)}):g()}},G=function(){setTimeout(function(){var a=c-1;0<c&&h.notify({data:f,index:a,value:f[a]});v()},0)},e=!1;g=function(){e||(0===c%o?G():v())};var F=!1,l={resume:function(){!F&&e&&
(e=!1,g())},pause:function(){e=!0},stop:function(){F=!0;h.resolve(f)}};G();return h.promise()}})})();(function(){function d(a,f){for(var k=0,h=z.length;k<h;k++){var o=z[k];a[o]&&(f[I[o]](a[o]),a[o]=void 0)}}function C(d,f,k){for(var h in f)if(f.hasOwnProperty(h)&&(k||!M(f[h]))&&-1===a.inArray(h,o))d[h]=f[h]}function k(a,d){C(this,a,!0);d.promise(this);var f=this.always;this.always=function(){f.apply(this,arguments);return this}}var o=["error","success","complete"],z=["error","success","complete"],
I={success:"done",error:"fail",complete:"always"};f.u.obj.expose("h5",{ajax:function(){function o(a,d,f){C(p,f);r.resolveWith(this,arguments)}function z(d,f,h){if(0===u.retryCount||!1===u.retryFilter.apply(this,arguments))C(p,d),r.rejectWith(this,arguments);else if(u.retryCount--,this.async){var c=this;setTimeout(function(){a.ajax(c).done(o).fail(z)},u.retryInterval)}else a.ajax(this).done(o).fail(z)}var u={},w=arguments;x(w[0])?(a.extend(u,w[1]),u.url=w[0]):a.extend(u,w[0]);var u=a.extend({},f.settings.ajax,
u),r=f.async.deferred();d(u,r);var w=a.ajax(u),p=new k(w,r);w.done(o).fail(z);return p}})})();(function(){function h(a,b,i,c,e){for(var f in i)f in kb&&d(Oa,[e,f],{controllerDefObj:i})}function C(b,i){function c(e,f){-1!==a.inArray(e,f)&&d(va,[i],{controllerDefObj:b});p(e,function(a){c(a,f.concat([e]))},!0)}c(b,[])}function k(b,i){function c(e,f){-1!==a.inArray(e,f)&&d(Pa,[i],{controllerDefObj:b});j(e,function(a){c(a,f.concat(e))})}j(b,function(){c(b,[])})}function o(b,i,c){null==b&&d(gb,[c],{controllerDefObj:i});
!x(b)&&"object"!==typeof b&&d(Qa,[c],{controllerDefObj:i});b=a(b);0===b.length&&d(hb,[c],{controllerDefObj:i});1<b.length&&d(Da,[c],{controllerDefObj:i});b[0].nodeType!==Ga&&b[0].nodeType!==U&&d(Ra,[c],{controllerDefObj:i})}function z(a,b,i,d,c){this.controller=a;this.event=b;this.evArg=i;this.selector=d;this.selectorType=c}function I(a){return!this.__controllerContext||!this.__controllerContext.executeListeners?void 0:a.proceed()}function v(a,b,i){var d=D(a.__name,b);i&&d.push(I);return u(a[b],b,
d)}function D(a,b){var i=[],d=f.settings.aspects;if(!d||0===d.length)return i;for(var d=L(d),c=d.length-1;-1<c;c--){var e=d[c];if(!e.target||e.compiledTarget.test(a)){var n=e.interceptors;if(!e.pointCut||e.compiledPointCut.test(b))if(J(n))for(e=n.length-1;-1<e;e--)i=i.concat(n[e]);else i.push(n)}}return i}function u(a,b,i){for(var d=function(a,b,i){return function(){var d=this;return i.call(d,{target:d,func:a,funcName:b,args:arguments,proceed:function(){return a.apply(d,this.args)}})}},c=0,e=i.length;c<
e;c++)a=d(a,b,i[c]);return a}function w(a){for(var b in a)M(a[b])&&(a[b]=u(a[b],b,D(a.__name,b)));return a}function r(a,b){for(var d=["window","document","navigator"],i=0,c=d.length;i<c;i++){var e=d[i];if(a===e||ha(a,e+"."))return f.u.obj.getByPath(a,Y(b))}return a}function p(a,b,i){var d=i?R.get(a.__name):a.__controllerContext&&a.__controllerContext.cache;if(d)for(var i=0,c=d.childControllerProperties.length;i<c;i++){var e=d.childControllerProperties[i];if(!1===b(a[e],a,e))return!1}else for(e in a){var d=
a,c=e,f=i,n=d[c];if(Sa(c,Ta)&&"rootController"!==c&&"parentController"!==c&&n&&(f||n.__controllerContext&&!n.__controllerContext.isRoot&&(!n.parentController||n.parentController===d))&&!1===b(a[e],a,e))return!1}}function j(a,b){var i=R.get(a.__name);if(i)for(var d=0,c=i.logicProperties.length;d<c;d++){var e=i.logicProperties[d];if(!1===b(a[e],a,e))return!1}else for(e in a)if(a.hasOwnProperty(e)&&Sa(e,Ua)&&!1===b(a[e],a,e))return!1}function s(a,b,i,d){function c(a,i,d){if(!1===s(a,b,i,d))return!1}
return!1===b.call(this,a,i,d)?!1:p(a,c)}function B(a,b,i,d){if(!1===p(a,function(a,i,d){if(!1===B(a,b,i,d))return!1})||!1===b.call(this,a,i,d))return!1}function c(a,b,i){function d(a){if(a=a.parentController){var ua=i?a.__controllerContext[b]:a[b];ua&&c.push(ua);d(a)}}var c=[];d(a);return c}function b(a,b,d){function i(a){var ua=d?a.__controllerContext[b]:a[b];ua&&c.push(ua);p(a,i)}var c=[];p(a,i);return c}function g(b,i){function d(b){var i=b.handler,c=b.controller;b.handler=function(){var d=1===
f.settings.listenerElementType?a(this):this;i.call(c,Q(b,arguments),d)}}var c=i.selector,e=i.eventName,n=b[i.propertyKey];switch(e){case "mousewheel":c=oa(b,c,e,n);break;case wa:case Ja:case xa:c=Ia(b,c,e,n);break;default:c=na(b,c,e,n)}J(c)||(c=[c]);e=0;for(n=c.length;e<n;e++)d(c[e]);return c}function l(b,i,d){var c=b.controller.rootElement,e=b.selector,n=b.eventName,g=b.handler,R=i.bindRequested;if(i=i.global){var q=!1;e===ya?(e=c,q=!0):e=r(e,d);q||R||!x(e)?(b.evSelectorType=za.SELECTOR_TYPE_OBJECT,
a(e).bind(n,g)):(b.evSelectorType=za.SELECTOR_TYPE_GLOBAL,a(d).delegate(e,n,g));b.evSelector=e}else b.evSelectorType=za.SELECTOR_TYPE_LOCAL,b.evSelector=e,R?a(e,c).bind(n,g):a(c).delegate(e,n,g);lb&&n===wa&&null!=f.settings.trackstartTouchAction&&(i?a(b.evSelector,d):a(b.evSelector,c)).each(function(){this.style[Xa]=f.settings.trackstartTouchAction})}function N(a,b){s(a,function(a){a.__controllerContext.executeListeners=b})}function G(a,b,i){return function(){var d=null,c=a.__name;if(a[b])try{d=a[b]({args:a.__controllerContext.args})}catch(e){throw a.rootController&&
a.rootController.dispose(arguments),e;}d&&M(d.done)&&M(d.fail)?d.done(i).fail(function(){var b=Z(Ya,c,Aa(arguments));a.rootController&&a.rootController.dispose(b)}):i()}}function e(a,i){s(a,function(a){if(!ba(a)){var d,e;"__init"===i?(d=F(a),e=c(a,"initPromise"),e.push(a.preInitPromise)):"__postInit"===i?(d=O(a),e=b(a,"postInitPromise")):(d=m(a),e=b(a,"readyPromise"));Ha(e,G(a,i,d))}})}function F(a){return function(){if(!ba(a)){a.isInit=!0;var b=a.__controllerContext.initDfd;delete a.__controllerContext.templatePromise;
delete a.__controllerContext.preInitDfd;delete a.__controllerContext.initDfd;var d=a.rootElement,i=[];try{var c=a.__meta;p(a,function(a,b,e){i.push(a);b=c&&c[e]&&c[e].rootElement?ta(c[e].rootElement,d,a):d;o(b,a.__controllerContext.controllerDef,a.__name);a.rootElement=b;a.view.__controller=a})}catch(n){a.rootController.dispose(n);return}b.resolveWith(a);ba(a)||!i.length&&function(){var b=!0;s(a.rootController,function(a){return b=a.isInit});return b}()&&e(a.rootController,"__postInit")}}}function O(a){return function(){if(!ba(a)){a.isPostInit=
!0;var b=a.__controllerContext.postInitDfd;delete a.__controllerContext.postInitDfd;b.resolveWith(a);a.__controllerContext&&a.__controllerContext.isRoot&&(s(a,function(a,b,d){if(!1!==(b&&b.__meta&&b.__meta[d]&&b.__meta[d].useHandlers)&&a.rootElement){var b=a.__controllerContext.cache.bindMap,d=S(a.rootElement),i;for(i in b)for(var c=g(a,b[i]),e=0,ua=c.length;e<ua;e++){var n=c[e];n.controller.__controllerContext.unbindHandlerList.push({bindObj:n,eventHandlerInfo:b[i]});l(c[e],b[i],d)}}}),da(a))}}}
function m(b){return function(){if(!ba(b)){b.isReady=!0;var d=b.__controllerContext.readyDfd;delete b.__controllerContext.readyDfd;d.resolveWith(b);b.__controllerContext&&b.__controllerContext.isRoot&&b.rootElement&&b.isInit&&b.isPostInit&&b.isReady&&a(b.rootElement).trigger("h5controllerready",b)}}}function aa(b,i,c){if(!x(b))return a(b);var e=a.trim(b);$.test(e)?(b=a.trim(e.substring(1,e.length-1)),c&&(ha(b,"window")||ha(b,"navigator"))&&d(sa),i=a(r(b,S(i.ownerDocument)))):i=a(i).find(b);return i}
function na(a,b,i,d){return{controller:a,selector:b,eventName:i,handler:d}}function oa(a,b,i,d){return{controller:a,selector:b,eventName:typeof document.onmousewheel===ja?"DOMMouseScroll":i,handler:function(b){var i=b.event;null==i.wheelDelta&&i.originalEvent&&null!=i.originalEvent.wheelDelta&&(i.wheelDelta=i.originalEvent.wheelDelta);null==i.wheelDelta&&i.originalEvent&&null!=i.originalEvent.detail&&(i.wheelDelta=40*-i.originalEvent.detail);d.call(a,b)}}}function Ia(b,i,d,c){function e(a,b){for(var i in a)a.hasOwnProperty(i)&&
!b[i]&&"target"!==i&&"currentTarget"!==i&&"originalEvent"!==i&&"liveFired"!==i&&(b[i]=a[i]);b.h5DelegatingEvent=a}var n=typeof document.ontouchstart!==ja;if(d!==wa)return na(b,i,d,function(b){var i=b.event.h5DelegatingEvent.type;if("mousemove"===i||"mouseup"===i){var i=b.event,d=a(i.currentTarget).offset()||{left:0,top:0};i.offsetX=i.pageX-d.left;i.offsetY=i.pageY-d.top}c.apply(this,arguments)});var f=a(S(b.rootElement));return function(){function g(i,d,c){return function(n){var ea;a:{switch(i){case "touchstart":case "mousedown":ea=
wa;break a;case "touchmove":case "mousemove":ea=Ja;break a;case "touchend":case "mouseup":ea=xa;break a}ea=void 0}var R=ea===wa;if(!R||!E){var P=0===n.event.type.indexOf("touch");P&&ca(n.event,i);var l=new a.Event(ea);e(n.event,l);var fb=n.event.target;d&&(fb=d);c&&c(l);var K=n.event.originalEvent||n.event;R&&-1===a.inArray(K,ra)&&(ra=[],Ba=[]);var h=a.inArray(K,ra);-1===h&&(h=ra.push(K)-1,Ba[h]=!1);if(!Ba[h]&&(!P||E||R))Ba[h]=!0,a(fb).trigger(l,n.evArg),E=!0;if(n.event.currentTarget===document&&
(ea===xa&&(ra=[],Ba=[]),-1!==a.inArray(K,ra)))ra.splice(h,1),Ba.splice(h,1);if(R&&E){l.h5DelegatingEvent.preventDefault();ea=l.target;var k=l.clientX,j=l.clientY,t=P?"touchmove":"mousemove",A=P?"touchend":"mouseup",y=g(t,ea,function(a){var b=a.clientX,i=a.clientY;a.dx=b-k;a.dy=i-j;k=b;j=i}),V=g(A,ea),ha=function(a){n.event=a;n.evArg=ga(arguments);y(n)},H=function(a){n.event=a;n.evArg=ga(arguments);V(n)},o=P?a(ea):f;q=function(){ra=[];Ba=[];o.unbind(t,ha);o.unbind(A,H);if(!P&&b.rootElement!==document){a(b.rootElement).unbind(t,
ha);a(b.rootElement).unbind(A,H)}};o.bind(t,ha);o.bind(A,H);!P&&b.rootElement!==document&&(a(b.rootElement).bind(t,ha),a(b.rootElement).bind(A,H))}else ea===xa&&(q(),E=!1)}}}function R(a){return{controller:b,selector:i,eventName:a,handler:g(a)}}var q=null,E=!1,P=[na(b,i,d,c)];n&&P.push(R("touchstart"));P.push(R("mousedown"));return P}()}function ca(b,i){var d=b.originalEvent;if(d){var c="touchend"===i||"touchcancel"===i?d.changedTouches[0]:d.touches[0],e=c.pageX,n=c.pageY;b.pageX=d.pageX=e;b.pageY=
d.pageY=n;b.screenX=d.screenX=c.screenX;b.screenY=d.screenY=c.screenY;b.clientX=d.clientX=c.clientX;b.clientY=d.clientY=c.clientY;c=b.target;if(c.ownerSVGElement)c=c.farthestViewportElement;else if(c===window||c===document)c=document.body;if(c=a(c).offset())n-=c.top,b.offsetX=d.offsetX=e-c.left,b.offsetY=d.offsetY=n}}function ga(a){return 3>a.length?a[1]:Aa(a).slice(1)}function Q(b,i){var d=null,c=null;i&&(d=i[0],c=ga(i));var e=d;if(e&&null==e.offsetX&&null==e.offsetY&&e.pageX&&e.pageY){var n=e.target;
if(n.ownerSVGElement)n=n.farthestViewportElement;else if(n===window||n===document)n=document.body;if(n=a(n).offset())e.offsetX=e.pageX-n.left,e.offsetY=e.pageY-n.top}return new z(b.controller,d,c,b.evSelector,b.evSelectorType)}function jb(a){s(a,function(a){a.rootElement=null;a.view.__controller=null})}function ta(b,i,c){null==b&&d(gb,[c.__name]);!x(b)&&"object"!==typeof b&&d(Qa,[c.__name]);b=i?aa(b,i):a(b);0===b.length&&d(hb,[c.__name]);1<b.length&&d(Da,[c.__name]);return b.get(0)}function da(b){var d=
b.__controllerContext.managed,c=i.controllers;-1===a.inArray(b,c)&&!1!==d&&c.push(b);!1!==d&&a(b.rootElement).trigger("h5controllerbound",b);e(b,"__ready")}function W(a){var b=K();setTimeout(function(){b.resolve()},0);b.promise().done(function(){e(a,"__init")}).fail(P)}function q(a,b){s(a,function(a){var i=K();i.resolve();a.__controllerContext.templatePromise=i.promise();a.__controllerContext.initDfd=K();a.initPromises=a.__controllerContext.initDfd.promise();a.__controllerContext.postInitDfd=K();
a.postInitPromise=a.__controllerContext.postInitDfd.promise();a.__controllerContext.readyDfd=K();a.readyPromise=a.__controllerContext.readyDfd.promise();a.isInit=!1;a.isPostInit=!1;a.isReady=!1;a.__controllerContext.args=b})}function y(b,i){var d=null,c=i;a.isPlainObject(c)?d=c.target:c={};d=d?aa(d,b.rootElement,!0):b.rootElement;return f.ui.indicator.call(b,d,c)}function H(a,b){var i=[];B(a,function(a){if(a[b]&&M(a[b])&&(a=a[b](),E(a))){var d=f.async.deferred();a.always(function(){d.resolve()});
i.push(d.promise())}});return i}function t(a){for(var b in a)a.hasOwnProperty(b)&&(a[b]=null)}function T(a){B(a,function(a){t(a);a.view&&a.view.__view&&a.view.clear();t(a)})}function fa(a,b){return b.view.__view.isAvailable(a)?b.view.__view:b.parentController?fa(a,b.parentController):f.core.view}function ba(a){return!a.__controllerContext||a.__controllerContext.isDisposing}function Ka(a,b){var i=["postInitDfd","readyDfd"],d=[];s(a,function(a){d.push(a);var i=a.__controllerContext.initDfd;i&&!la(i)&&
!Ca(i)&&i.rejectWith(a,[b])});for(var c=0,e=i.length;c<e;c++)for(var n=i[c],f=d.length-1;0<=f;f--){var R=d[f],g=R.__controllerContext[n];g&&!la(g)&&!Ca(g)&&g.rejectWith(R,[b])}}function Va(a,b){for(var i=a.childNodes,d=0,c=i.length;d<c;d++){var e=i[d];if(1===e.nodeType){if(e=Va(e,b))return e}else if(8===e.nodeType){var n=e.nodeValue;if(0===n.indexOf(ma)){var f=n.indexOf("}");if(-1!==f&&(n=n.slice(0,f).match(/id="([A-Za-z][\w-:\.]*)"/))&&n[1]===b)return e}}}return null}function pa(a){var b=this;return function(){return a.apply(b,
arguments)}}function qa(a){var b=this;return function(){var i=f.u.obj.argsToArray(arguments);i.unshift(this);return a.apply(b,i)}}function Za(a,b,i){function c(e){f.u.obj.getByPath("h5.core.view")||d($a);a.view.load(i).done(function(){b.resolve()}).fail(function(a){var i=a.detail.error.status;e===f.settings.dynamicLoading.retryCount||0!==i&&12029!==i?setTimeout(function(){b.reject(a)},0):setTimeout(function(){c(++e)},f.settings.dynamicLoading.retryInterval)})}c(0)}function ab(){this.logicProperties=
[];this.eventHandlerProperties=[];this.functionProperties=[];this.otherProperties=[];this.bindMap={};this.childControllerProperties=[]}function n(b){var i=new ab,c=i.logicProperties,e=i.eventHandlerProperties,n=i.functionProperties,f=i.otherProperties,g=i.bindMap,R=i.childControllerProperties,P={},q;for(q in b)if(-1!==q.indexOf(" ")&&M(b[q])){e.push(q);var E=a.trim(q),l=E.lastIndexOf(" "),K=a.trim(E.substring(0,l)),E=a.trim(E.substring(l+1,E.length)),l=$.test(K),h=ia.test(E);h&&(E=a.trim(a.trim(E.substring(1,
E.length-1))));l&&(K=a.trim(K.substring(1,K.length-1)),"this"===K&&d(Ea,[b.__name],{controllerDef:b}));P[K]||(P[K]={});P[K][E]&&P[K][E].global===l&&P[K][E].bindRequested===h?d(Fa,[b.__name,K,E],{controllerDef:b}):P[K][E]={global:l,bindRequested:h};g[q]={selector:K,global:l,bindRequested:h,eventName:E,propertyKey:q}}else Sa(q,Ta)&&b[q]&&!M(b[q])?R.push(q):Sa(q,Ua)&&b[q]&&!M(b[q])?c.push(q):M(b[q])?n.push(q):f.push(q);return i}function A(a){this.__controller=a;f.u.obj.getByPath("h5.core.view")&&(this.__view=
f.core.view.createView())}function V(a,b,i,d,c){this.__name=b;this.__templates=null;this.rootElement=a;this.__controllerContext={executeListeners:!0,isRoot:c,unbindHandlerList:[],controllerDef:i};this.__controllerContext.args=d?d:null;this.isReady=this.isPostInit=this.isInit=!1;this.readyPromise=this.postInitPromise=this.initPromise=this.preInitPromise=this.parentController=this.rootController=null;this.log=f.log.createLogger(b);this.view=new A(this)}function Wa(){this.rootElement=document;this.controllers=
[];a(document).bind(X,function(a,b){null==b.target&&(b.target=document);b.indicator=y(this,b);a.stopPropagation()})}function La(){this._init()}function Ma(b,i,c,e){var f=!e||!e.isInternal,g=i.__name;(!x(g)||0===a.trim(g).length)&&d(mb,null,{controllerDefObj:i});c&&!a.isPlainObject(c)&&d(nb,[g],{controllerDefObj:i});i.__controllerContext&&d(ob,null,{controllerDefObj:i});var q=R.get(g);q||h(f,b,i,c,g);f&&(C(i,g),k(i,g));q||(q=n(i),R.register(g,q));f&&o(b,i,g);var E=new V(b?a(b).get(0):null,g,i,c,f),
l=K(),g=l.promise().fail(P),j=K(),t=j.promise().fail(P),A=K(),y=A.promise().fail(P),ha=K(),H=ha.promise();f||H.fail(P);b=E.__controllerContext;b.cache=q;b.preInitDfd=l;b.initDfd=j;b.postInitDfd=A;b.readyDfd=ha;E.preInitPromise=g;E.initPromise=t;E.postInitPromise=y;E.readyPromise=H;g=a.extend(!0,{},i);j=i.__templates;t=K();A=t.promise();j&&0<j.length?Za(E,t,j):t.resolve();A.done(function(){ba(E)||l.resolveWith(E)}).fail(function(a){l.rejectWith(E,[a]);E.rootController&&E.rootController.dispose(a)});
j=0;for(t=q.childControllerProperties.length;j<t;j++)A=q.childControllerProperties[j],E[A]=Ma(null,a.extend(!0,{},g[A]),c,a.extend({isInternal:!0},e));j=0;for(t=q.logicProperties.length;j<t;j++)A=q.logicProperties[j],E[A]=Na(i[A]);j=0;for(t=q.eventHandlerProperties.length;j<t;j++)A=q.eventHandlerProperties[j],E[A]=v(g,A,!0);j=0;for(t=q.functionProperties.length;j<t;j++)A=q.functionProperties[j],E[A]=v(g,A);j=0;for(t=q.otherProperties.length;j<t;j++)A=q.otherProperties[j],E[A]=g[A];if(f){var Aa=!1;
s(E,function(a,b){a.__construct&&a.__construct({args:a.__controllerContext.args});if(ba(a)){Aa=true;return false}if(a===E){a.rootController=a;a.parentController=null}else{a.parentController=b;a.rootController=b.rootController}});if(Aa)return null}b.managed=e&&e.managed;f&&W(E);return E}function Na(b){var i=b.__name;(!x(i)||0===a.trim(i).length)&&d(ka,null,{logicDefObj:b});b.__logicContext&&d(pb,null,{logicDefObj:b});var c=a.extend(!0,{},b),c=w(c);c.deferred=K;c.log=f.log.createLogger(i);c.__logicContext=
{logicDef:b};c.own=pa;c.ownWithOrg=qa;j(c,function(a,b,i){b[i]=Na(a)});return c}var za={SELECTOR_TYPE_LOCAL:1,SELECTOR_TYPE_GLOBAL:2,SELECTOR_TYPE_OBJECT:3},Ta="Controller",Ua="Logic",wa="h5trackstart",Ja="h5trackmove",xa="h5trackend",ya="rootElement",X="triggerIndicator",$=/^\{.*\}$/,ia=/^\[.*\]$/,ma="{h5view ",sa=6E3,gb=6001,hb=6003,Da=6004,mb=6006,nb=6007,ob=6008,va=6009,Pa=6010,Oa=6011,Ea=6012,Fa=6013,ka=6017,pb=6018,$a=6029,Qa=6030,Ya=6033,Ra=6034,i,R,P=function(){},K=f.async.deferred,E=f.async.isPromise,
ha=f.u.str.startsWith,Sa=f.u.str.endsWith,qb=f.u.str.format,Aa=f.u.obj.argsToArray,ra=[],Ba=[],Xa="",lb=function(){var a=document.createElement("div");return typeof a.style.touchAction!==ja?(Xa="touchAction",!0):typeof a.style.msTouchAction!==ja?(Xa="msTouchAction",!0):!1}();a.extend(z.prototype,za);a.extend(A.prototype,{get:function(a,b){return fa(a,this.__controller).get(a,b)},update:function(a,b,i){a=aa(a,this.__controller.rootElement,!0);return fa(b,this.__controller).update(a,b,i)},append:function(a,
b,i){a=aa(a,this.__controller.rootElement,!0);return fa(b,this.__controller).append(a,b,i)},prepend:function(a,b,i){a=aa(a,this.__controller.rootElement,!0);return fa(b,this.__controller).prepend(a,b,i)},load:function(a){return this.__view.load(a)},register:function(a,b){this.__view.register(a,b)},isValid:function(a){return this.__view.isValid(a)},isAvailable:function(a){return fa(a,this.__controller).isAvailable(a)},clear:function(a){this.__view.clear(a)},bind:function(b,i){var d=b;if(x(b)&&0===
b.indexOf("h5view#")){for(var c=Va(this.__controller.rootElement,b.slice(7)),d=c.nodeValue,d=d.slice(d.indexOf("}")+1),e=a("<div>").append(d),d=[],n=e[0].childNodes,f=0,g=n.length;f<g;f++)d.push(n[f]);e.empty();e=document.createDocumentFragment();f=0;for(g=d.length;f<g;f++)e.appendChild(d[f]);c.parentNode.insertBefore(e,c.nextSibling)}return this.__view.bind(d,i)}});a.extend(V.prototype,{$find:function(b){return a(this.rootElement).find(b)},deferred:function(){return K()},trigger:function(b,i){var d=
x(b)?a.Event(b):b;a(this.rootElement).trigger(d,i);return d},own:pa,ownWithOrg:qa,bind:function(a,b){this.__controllerContext.isRoot||d(6031);this.rootElement=ta(a,null,this);this.view.__controller=this;q(this,b?b:null);W(this);return this},unbind:function(){this.__controllerContext.isRoot||d(6031);H(this,"__unbind");s(this,function(b,i,d){if(!1!==(i&&i.__meta&&i.__meta[d]&&i.__meta[d].useHandlers)&&(i=b.rootElement))for(var d=S(i),b=b.__controllerContext.unbindHandlerList,c=0,e=b.length;c<e;c++){var n=
b[c].eventHandlerInfo,f=b[c].bindObj,g=f.selector,q=f.handler,f=f.eventName,E=n.bindRequested;if(n.global){n=g;g=!1;if(n===ya)n=i,g=!0;else{if(null==Y(d))continue;n=r(n,d)}g||E||!x(n)?a(n).unbind(f,q):a(d).undelegate(n,f,q)}else E?a(g,i).unbind(f,q):a(i).undelegate(g,f,q)}});this.__controllerContext.unbindList={};var b=this;i.controllers=a.grep(i.controllers,function(a){return a!==b});a(this.rootElement).trigger("h5controllerunbound",this);jb(this)},dispose:function(a){if(!ba(this)){this.__controllerContext.isDisposing=
1;Ka(this,a);var b=this.deferred();this.unbind();var i=this,a=H(this,"__dispose");Ha(a,function(){T(i);b.resolve()},null,!0);return b.promise()}},triggerIndicator:function(b){var i={indicator:null};b&&a.extend(i,b);a(this.rootElement).trigger(X,[i]);return i.indicator},indicator:function(a){return y(this,a)},enableListeners:function(){N(this,!0)},disableListeners:function(){N(this,!1)},throwError:function(a,b){var i=Aa(arguments);i.unshift(null);this.throwCustomError.apply(null,i)},throwCustomError:function(a,
b,i){2>arguments.length&&d(6005);var c=null;b&&x(b)?c=Error(qb.apply(null,Aa(arguments).slice(1))):(c=Error(),c.detail=b);c.customType=a;throw c;}});a.extend(Wa.prototype,{getAllControllers:function(){return this.controllers},getControllers:function(b,i){for(var d=i&&i.deep,c=i&&i.name?L(i.name):null,e=a(b)[0],n=this.controllers,f=[],g=0,q=n.length;g<q;g++){var E=n[g];c&&-1===a.inArray(E.__name,c)||(e===E.rootElement?f.push(E):d&&S(e)===S(E.rootElement)&&a.contains(e,E.rootElement)&&f.push(E))}return f}});
a.extend(La.prototype,{get:function(a){return this._cacheMap[a]},register:function(a,b){this._cacheMap[a]=b},clear:function(a){delete this._cacheMap[a]},clearAll:function(){this._cacheMap={}},_init:function(){this._cacheMap={}}});R=new La;i=new Wa;f.u.obj.expose("h5.core",{controllerManager:i,definitionCacheManager:{clear:function(a){R.clear(a)},clearAll:function(){R.clearAll()}}});var kb=function(){var a={},b=new V(null,"a"),i;for(i in b)b.hasOwnProperty(i)&&"__name"!==i&&"__templates"!==i&&"__meta"!==
i&&(a[i]=1);b=V.prototype;for(i in b)b.hasOwnProperty(i)&&(a[i]=null);return a}();db.controllerInternal=Ma;f.u.obj.expose("h5.core",{controller:function(a,b,i){2>arguments.length&&d(6032);return Ma(a,b,i)},logic:Na,expose:function(a){var b=a.__name;b||d(6019,null,{target:a});var i=b.lastIndexOf(".");if(-1===i)window[b]=a;else{var c=b.substr(0,i),b=b.substr(i+1,b.length),i={};i[b]=a;f.u.obj.expose(c,i)}}})})();(function(){function h(a){return(a=a&&x(a)?a.match(/^(string|number|integer|boolean|any|enum|@(.+?))((\[\]){0,1})$/):
null)?{elmType:a[1],dataModel:a[2],dimension:a[3]?1:0}:{}}function C(b,d){return function K(b,i){if(!d[b])return!1;for(var c=0,e=d[b].length;c<e;c++)if(-1<a.inArray(d[b][c],i)||K(d[b][c],i.concat([b])))return!0;return!1}(b,[])}function k(a){return"number"===typeof a&&isNaN(a)}function o(a,b){return null==a||k(a)||"number"===typeof a||!b&&(a instanceof Number||!(!(x(a)||a instanceof String)||!a.match(/^[+\-]{0,1}[0-9]*\.{0,1}[0-9]+$/)))}function z(a,b){return null==a||"number"===typeof a&&parseInt(a)===
a||!b&&(a instanceof Number&&parseInt(a)===parseFloat(a)||("string"===typeof a||a instanceof String)&&!!a.match(/^[+\-]{0,1}[0-9]+$/))}function I(b,c,e){function n(){f.push(B.call(this,arguments));if(e)throw null;}var f=[];try{if(!a.isPlainObject(b))throw n(Ka),null;ia(b.name)||n(Va);var g=b.base,q=null;if(null!=g)if(!x(g)||0!==g.indexOf("@"))n(pa);else{var l=g.substring(1);c.models[l]?q=c.models[l].schema:n(qa,l)}var j=b.schema;!q&&null==j&&n(Za);if(!q&&!a.isPlainObject(j))throw n(ab),null;}catch(h){d(W,
null,f)}}function v(b,c,e,f){function g(){q.push(B.call(this,arguments));if(f)throw null;}"object"!==typeof b&&d(y);var q=[];try{if(c){var l=!1,j;for(j in b)b[j]&&!0===b[j].id&&(l&&g(n),l=!0);l||g(A)}var t={},l=function(a){if(null!=a){p&&g(Wa,m);T.hasOwnProperty("defaultValue")&&g(la,m);if(null==a.on)g(La,m);else for(var d=L(a.on),c=0,e=d.length;c<e;c++)if(!b.hasOwnProperty(d[c])){g(La,m);break}"function"!==typeof a.calc&&g(Ma,m);t[m]=L(a.on)}};j=function(a){p&&null==a&&(a="string");var b={};null!=
a&&(x(a)?(p&&"string"!==a&&"integer"!==a&&g(Ga,m),b=h(a),b.elmType?(b.dataModel&&(c||g(za,m,b.dataModel),e.models[b.dataModel]||g(Ta,m,b.dataModel)),"enum"===b.elmType&&null==T.enumValue&&g(Ua,m)):g(za,m,a)):g(Na,m))};var s=function(b,i){if(null!=b)if(a.isPlainObject(b)){for(var d in b){var c=b[d];if(null!=c)switch(d){case "notNull":!0!==c&&!1!==c?g(Ja,m,d):p&&!c&&g(Da,m,d,c);break;case "min":case "max":switch(i.elmType){case "integer":(x(c)||!z(c)||k(c))&&g(xa,m,d);break;case "number":(x(c)||x(c)||
!o(c)||Infinity===c||-Infinity===c||k(c))&&g(xa,m,d);break;default:g(ya,m,d,i.elmType)}break;case "minLength":case "maxLength":switch(i.elmType){case "string":x(c)||!z(c)||k(c)||0>c?g(X,m,d):p&&"maxLength"===d&&0===c&&g(Da,m,d,c);break;default:g(ya,m,d,i.elmType)}break;case "notEmpty":switch(i.elmType){case "string":!0!==c&&!1!==c?g(Ja,m,d):p&&!c&&g(Da,m,d,c);break;default:g(ya,m,d,i.elmType)}break;case "pattern":switch(i.elmType){case "string":"regexp"!==a.type(c)&&g(Y,m,d);break;default:g(ya,m,
d,i.elmType)}}}b.notEmpty&&0===b.maxLength&&g(U,m,"notEmpty","maxLength");null!=b.min&&null!=b.max&&b.min>b.max&&g(U,m,"min","max");null!=b.minLength&&null!=b.maxLength&&b.minLength>b.maxLength&&g(U,m,"minLength","maxLength")}else g(wa,m)},r=function(b,i){null!=b&&("enum"!==i.elmType&&g($,m),(!J(b)||0===b.length||-1<a.inArray(null,b)||-1<a.inArray(void 0,b))&&g(Z,m))},m;for(m in b){var T=null==b[m]?{}:b[m],p=c&&!!T.id;ia(m)||g(V,m);l(T.depend);j(T.type);var u={},w=p&&null==w?"string":T.type;x(w)&&
(u=h(w));s(T.constraint,u);r(T.enumValue,u);p&&T.hasOwnProperty("defaultValue")&&g(ma,m)}for(var G in t)C(G,t)&&g(Ca,G)}catch(v){d(H,null,q)}return!0}function D(a,b){var c=[];try{for(var e in a){var n=a[e];if(n&&(n.hasOwnProperty("defaultValue")||!n.type||!("array"===n.type||h(n.type).dimension))&&n.hasOwnProperty("defaultValue")){var f=n.defaultValue;b[e](f).length&&pushErrorReason(sa,e,f)}}return!0}catch(g){d(H,null,c)}}function u(a,b,d){var c={},e;for(e in a){var n=c,f=e,g;g=d;var q=a[e]||{},l=
[],j=null,t=0,j=q.type,A=q.constraint||{};b&&q.id&&(j=j||"string",A.notNull=!0,"string"===j&&(A.notEmpty=!0));j&&(t=h(j),j=t.elmType,t=t.dimension,l.push(r(j,{manager:g,enumValue:q.enumValue})));A&&l.push(w(A));g=p({checkFuncs:l,dimension:t});n[f]=g}return c}function w(a){return function(b){var d=[];a.notNull&&null==b&&d.push({notNull:a.notNull});a.notEmpty&&!b&&d.push({notEmpty:a.notEmpty});if(null==b)return d;null!=a.min&&b<a.min&&d.push({min:a.min});null!=a.max&&a.max<b&&d.push({max:a.max});null!=
a.minLength&&b.length<a.minLength&&d.push({minLength:a.minLength});null!=a.maxLength&&a.maxLength<b.length&&d.push({maxLength:a.maxLength});null!=a.pattern&&!b.match(a.pattern)&&d.push({pattern:a.pattern});return d}}function r(b,d){var c=[{type:b}];switch(b){case "number":return function(a,b){return o(a,b)?[]:c};case "integer":return function(a,b){return z(a,b)?[]:c};case "string":return function(a,b){return null==a||x(a)||!b&&a instanceof String?[]:c};case "boolean":return function(a,b){return null==
a||"boolean"===typeof a||!b&&a instanceof Boolean?[]:c};case "enum":return function(b){var i;a:if(i=d.enumValue,k(b)){for(var b=0,e=i.length;b<e;b++)if(k(i[b])){i=!0;break a}i=!1}else i=null===b||-1<a.inArray(b,i);return i?[]:c};case "any":return function(){return[]}}var e=b.match(/^@(.+?)$/)[1],n=d.manager;return function(a){var b=n.models[e];return!b||"object"!==typeof a&&null!=a?c:null==a||b.has(a)?[]:c}}function p(a){var b=a.checkFuncs;if(!b||0===b.length)return function(){return[]};var d=a.dimension||
0;return function(a,i){function c(a,n){if(!n){for(var g=0,q=b.length;g<q;g++){var l=b[g](a,i);if(l.length)return e=e.concat(l),!1}return!0}if(null==a)return!0;if(!J(a)&&!f.core.data.isObservableArray(a))return e.push({dimension:d}),!1;g=0;for(q=a.length;g<q;g++)if(!c(a[g],n-1))return!1;return!0}var e=[];c(a,d);return e}}function j(a,b){a._values={};a._nullProps={};for(var d in b)if(b[d]&&s(b[d].type)){var c=ga();c.relatedItem=a;a._values[d]=c;a._nullProps[d]=!0}}function s(a){return!a?!1:-1!==a.indexOf("[]")}
function B(){return{code:arguments[0]}}function c(b,c,e,n){function g(d){for(var d=L(l[d].depend.on),c=0,e=d.length;c<e;c++)if(-1===a.inArray(d[c],b._realProperty)&&-1!==a.inArray(d[c],q))return!1;return!0}function f(b,d){for(var c=0,i=d.length;c<i;c++){var e=j[d[c]];if(e)for(var n=0,g=e.length;n<g;n++){var q=e[n];-1===a.inArray(q,b)&&b.push(q)}}}var q=[],l=b.schema||b._model.schema,j=b._dependencyMap,t={};for(n?q=b._dependProps.slice():f(q,L(e));0!==q.length;){for(var e=[],n=0,A=q.length;n<A;n++){var h=
q[n];if(g(h)){var k=l[h].depend.calc.call(b,c);0!==b._validateItemValue(h,k,!0).length&&d(ba,[b._model?b._model.name:va,h,k]);t[h]={oldValue:b._values[h],newValue:k};l[h]&&s(l[h].type)?k?(b._values[h].copyFrom(k),b._nullProps[h]=!1):(b._values[h].copyFrom([]),b._nullProps[h]=!0):b._values[h]=k}else e.push(h)}f(e,q);q=e}return t}function b(a,b,c,e){for(var n in c){n in a||d(fa,[e?e.name:va,n]);var g=c[n];if(!a[n]||!s(a[n].type)||c.hasOwnProperty(n))g=b(n,g,e&&e._idKey===n),0<g.length&&d(t,[e?e.name:
va,n],g)}}function g(b,e,n,g){var q=b.schema||b._model.schema,l=[],j;for(j in e)if(!(n&&-1!==a.inArray(j,n))){var h=b._values[j],t=e[j];if(q[j]&&q[j].depend)h!==t&&d(T,[b._model?b._model.name:va,j]);else{var A=q[j]&&q[j].type;s(A)&&(null==t?(t=[],b._nullProps[j]=!0):b._nullProps[j]=!1);if(A&&A.match(/string|number|integer|boolean/)){var y=t;if(J(y)){for(var y=y.slice(0),t=0,m=y.length;t<m;t++)y[t]=y[t]&&"object"===typeof y[t]?y[t]&&y[t].valueOf&&y[t].valueOf():y[t];t=y}else t=y&&"object"===typeof y&&
y.valueOf?y.valueOf():y}if(null!=t&&A&&A.match(/number|integer/)&&"number"!==typeof t)if(J(t)||f.core.data.isObservableArray(t)){y=0;for(m=t.length;y<m;y++)null!=t[y]&&o(t[y])&&(t[y]=parseFloat(t[y]))}else null!=t&&(t=parseFloat(t));if(!s(A)||!h||!h.equals(t,h))h===t||k(h)&&k(t)||(A&&-1!==A.indexOf("[]")&&f.core.data.isObservableArray(h)&&(h=h.toArray()),l.push({p:j,o:h,n:t}))}}if(l.length){e={};n=[];y=0;for(j=l.length;y<j;y++)h=l[y],q[h.p]&&s(q[h.p].type)?h.n&&b._values[h.p].copyFrom(h.n):b._values[h.p]=
h.n,e[h.p]={oldValue:h.o,newValue:b.get(h.p)},n.push(h.p);q={type:!0===g?"create":"change",target:b,props:e};a.extend(e,c(b,q,n,g));return q}}function l(a){var b=a._manager,a=a.name;b._updateLogs||(b._updateLogs={});b._updateLogs[a]||(b._updateLogs[a]={});return b._updateLogs[a]}function N(a,b,d){if(a._manager)for(var c=l(a),e=0,n=d.length;e<n;e++){var g=d[e],f=g._values[a._idKey];c[f]||(c[f]=[]);c[f].push({type:b,item:g})}}function G(a,b){if(a._manager){var d=l(a),c=b.target._values[a._idKey];d[c]||
(d[c]=[]);d[c].push({type:Pa,ev:b})}}function e(b){var d={},c;for(c in b)if(b.hasOwnProperty(c)){var e=b[c]?b[c].depend:null;if(e)for(var e=L(e.on),n=0,g=e.length;n<g;n++){var f=e[n];d[f]||(d[f]=[]);-1===a.inArray(c,d[f])&&d[f].push(c)}}return d}function F(b,d){I(b,d,!0);var c;c=(c=b.base)?d.models[c.slice(1)].schema:{};c=a.extend({},c,b.schema);v(c,!0,d,!0);var e=u(c,!0,d);D(c,e,!0);return new na(c,b,e,d)}function O(b,d){var c=[],n=[],g=[],f;for(f in b)b[f]&&b[f].depend?n.push(f):c.push(f),b[f]&&
b[f].type&&-1!==b[f].type.indexOf("[]")&&g.push(f);f=e(b);var q={},l;for(l in b){var j=b[l];if(!j||!j.depend){var t=null,t=j&&void 0!==j.defaultValue?j.defaultValue:null;q[l]=t}}return{_realProps:c,_dependProps:n,_aryProps:g,_dependencyMap:f,_createInitialValueObj:function(b){if(!b)return a.extend({},q);var d=a.extend({},q),c;for(c in b)d[c]=b[c];return d},_validateItemValue:function(a,b,c){return d[a](b,c)}}}function m(b,c,e,n){var g=!1,j=["sort","reverse","pop","shift"],l=null;e.addEventListener("changeBefore",
function(e){n&&(b._isRemoved||!n._manager)&&d(q,[b._values[n._idKey],e.method]);var h=f.u.obj.argsToArray(e.args);if(-1===a.inArray(e.method,j)){var A=!0;switch(e.method){case "splice":A=!1;h.shift();h.shift();break;case "copyFrom":h=h[0];break;case "set":h.shift()}A&&(e=b._validateItemValue(c,h),0<e.length&&d(t,c,e))}n?(n._manager&&(e=n._manager,h=n.name,e._oldValueLogs||(e._oldValueLogs={}),e._oldValueLogs[h]||(e._oldValueLogs[h]={}),e=e._oldValueLogs[h],h=b._values[n._idKey],e[h]||(e[h]={}),e[h][c]||
(e[h][c]=b._values[c].toArray())),(g=n._manager?n._manager.isInUpdate():!1)||n._manager.beginUpdate()):l=b._values[c].toArray()});e.addEventListener("change",function(a){if(!(b._isInSet||null===a.method)){var d={type:"change",target:b,props:{}};d.props[c]={};n?(G(n,d),g?a.stopImmediatePropagation():(n._manager._isArrayPropChangeSilentlyRequested=!0,n._manager.endUpdate(),n._manager._isArrayPropChangeSilentlyRequested=!1)):e.equals(l)||(d.props[c]={oldValue:l,newValue:b._values[c]},b.dispatchEvent(d))}})}
function aa(a){ia(a)||d(da);this.models={};this.name=a;this._updateLogs=null;this._isArrayPropChangeSilentlyRequested=!1}function na(a,b,c,d){this.items={};this.size=0;this.name=b.name;this._manager=d;for(var e in a)a[e]&&a[e].id&&(this._idKey=e);this._idType=(b=a[this._idKey].type)?"string"===b?S:ta:S;this.schema=a;this._itemConstructor=oa(a,c,this);d.models[this.name]=this}function oa(c,d,e){function n(a){j(this,c,q,a);a=q._createInitialValueObj(a);b(c,q._validateItemValue,a,e);g(this,a,null,!0);
for(var a=q._aryProps,d=0,f=a.length;d<f;d++)m(this,a[d],this.get(a[d]),e)}var q=O(c,d);e._schemaInfo=q;f.mixin.eventDispatcher.mix(n.prototype);a.extend(n.prototype,q,Oa,{_model:e,_isRemoved:!1,getModel:function(){return this._isRemoved?null:this._model}});return n}function Ia(){}function ca(){this.length=0;this._src=[]}function ga(){return new ca}function Q(a){return a&&a.constructor===ca?!0:!1}var S="string",ta="number",da=15E3,W=15001,q=15005,y=15008,H=15009,t=15011,T=15012,fa=15013,ba=15016,
Ka=15900,Va=15901,pa=15902,qa=15903,Za=15904,ab=6,n=15800,A=15801,V=15802,Wa=15803,La=15804,Ma=15805,Na=15806,za=15807,Ta=15808,Ua=15809,wa=15810,Ja=15811,xa=15812,ya=15813,Y=15814,X=15815,U=15816,$=15817,Z=15818,ma=15819,sa=15820,Da=15821,la=15822,Ca=15823,Ga=15824,va="n/a",Pa=2,Oa={get:function(b){if(0===arguments.length)return a.extend({},this._values);var c=this._model;(c?c.schema:this.schema).hasOwnProperty(b)||d(15014,[c?c.name:va,b]);return this._values[b]},set:function(a){var c=a;2===arguments.length&&
(c={},c[arguments[0]]=arguments[1]);var e=this._model;e&&(this._isRemoved||!e._manager)&&d(q,[this._values[this._model._idKey],"set"],this);if(e)e._idKey in c&&c[e._idKey]!==this._values[e._idKey]&&d(15003,[e.name,this._idKey]),b(e.schema,e._schemaInfo._validateItemValue,c,e);else{var n=this.validate(c);if(n)throw n;}var n=null,f=e?e._manager.isInUpdate():!1;e&&!f&&e._manager.beginUpdate();this._isInSet=!0;n=g(this,c);this._isInSet=!1;e?(n&&G(e,n),f||e._manager.endUpdate()):n&&this.dispatchEvent(n)},
regardAsNull:function(a){return this._isArrayProp(a)?!0===this._nullProps[a]:null===this._values[a]},_isArrayProp:function(a){var b=this._model?this._model.schema:this.schema;return b[a]&&b[a].type&&-1<b[a].type.indexOf("[]")?!0:!1}};f.mixin.eventDispatcher.mix(aa.prototype);a.extend(aa.prototype,{createModel:function(b){(!b||"object"!==typeof b)&&d(W,null,[B(Ka)]);if(!J(b))return this.models[b.name]?this.models[b.name]:F(b,this);var c=b.length;c||d(W,null,[B(Ka)]);for(var e={},n=[],g=0;g<c;g++){var f=
b[g].name;if(this.models[f])t[g]=manager.models[b.name];else try{n.push(f);f=[];b[g].base&&f.push(b[g].base.substring(1));for(var q in b[g].schema){var l=b[g].schema[q];if(l){var h=l.type;h&&"@"===h.substring(0,1)&&(h=-1===h.indexOf("[]")?h.substring(1):h.substring(1,h.length-2),f.push(h))}}e[g]={depends:f}}catch(j){d(W)}}for(var t={size:0};t.size<c;){q={};l=!1;for(g=0;g<c;g++)if(!e[g].registed){for(var f=e[g].depends,h=0,A=f.length;h<A;h++)if(!this.models[f[h]]){q[f[h]]=!0;break}h===A&&(t[g]=F(b[g],
this),t.size++,l=!0,e[g].registed=!0)}if(!l){var g=!0,y;for(y in q)if(-1===a.inArray(y,n)){g=!1;break}g&&d(15004);d(W,null,[B(qa,y)])}}b=[];for(g=0;g<c;g++)b.push(t[g]);return b},dropModel:function(a){if((a=x(a)?a:"object"===typeof a?a.name:null)&&this.models[a]){var b=this.models[a];b._manager=null;delete this.models[a];return b}},isInUpdate:function(){return null!==this._updateLogs},beginUpdate:function(){this.isInUpdate()||(this._updateLogs={})},endUpdate:function(){if(this.isInUpdate()){var a=
!this._isArrayPropChangeSilentlyRequested,b=this._updateLogs,c=this._oldValueLogs;this._oldValueLogs=this._updateLogs=null;var d={},e;for(e in b)if(b.hasOwnProperty(e)){var n;n=this.models[e];var g=b[e],f=[],q=[],h=[],l=[],j=void 0;for(j in g){for(var t=g[j],A=!0,y=[],m=t.length-1;0<=m;m--){var H=t[m],V=H.type;if(V===Pa)y.push(H.ev);else{a:{for(A=0;A<m;A++){var o=t[A].type;if(1===o||3===o){m=t[A];break a}}m=null}if(1===V)m&&3===m.type?f.push({id:j,oldItem:m.item,newItem:H.item}):q.push(H.item);else if(m=
m&&3===m.type?m.item:m?null:H.item)l.push(m),m.dispatchEvent({type:"remove",model:n});A=!1;break}}if(A&&0<y.length){H={};for(m=y.length-1;0<=m;m--)for(var s in y[m].props)H[s]||(Q(n.get(j).get(s))?(V=c&&c[n.name]&&c[n.name][j]&&c[n.name][j][s],n.get(j).get(s).equals(V)||(H[s]={oldValue:V})):H[s]={oldValue:y[m].props[s].oldValue});m=!1;for(s in H)V=H[s].oldValue,t=n.get(j).get(s),V===t||k(V)&&k(t)?delete H[s]:(m=n.get(j).get(s),a&&Q(m)&&m.dispatchEvent({type:"change",method:null,args:null,returnValue:null}),
H[s].newValue=m,m=!0);m&&(y={type:"change",target:y[0].target,props:H},h.push(y),y.target.dispatchEvent(y))}}(n=0===q.length&&0===f.length&&0===l.length&&0===h.length?!1:{created:q,recreated:f,removed:l,changed:h})&&(d[e]=n)}a=!1;for(e in d)a=!0,n=d[e],this.models[e].dispatchEvent({type:"itemsChange",created:n.created,recreated:n.recreated,removed:n.removed,changed:n.changed});d={type:"itemsChange",models:d};a&&this.dispatchEvent(d)}},_dataModelItemsChangeListener:function(a){var b=a.target.manager,
c={};c[a.target.name]=a;b.dispatchEvent({type:"itemsChange",models:c})}});f.mixin.eventDispatcher.mix(na.prototype);a.extend(na.prototype,{create:function(a){this._manager||d(15006,[this.name,"create"]);var b=this.validate(a,!0);if(b)throw b;(b=this._manager?this._manager.isInUpdate():!1)||this._manager.beginUpdate();for(var c=[],e=L(a),n=[],f=this._idKey,q=0,h=e.length;q<h;q++){var l=e[q],j=l[f],t=this._findById(j);t?(n.push(t),(j=g(t,l,[f]))&&G(this,j)):(l=new this._itemConstructor(l),this.items[j]=
l,this.size++,c.push(l),n.push(l))}0<c.length&&N(this,1,c);b||this._manager.endUpdate();return J(a)?n:n[0]},validate:function(a,c){try{var e=this._idKey,n=L(a);"object"!==typeof a&&!J(a)&&d(15007);if(c)for(var g=0,f=n.length;g<f;g++){var q=n[g],h=q[e];(""===h||null==h)&&d(15002,[this.name,e]);var l=this._schemaInfo._createInitialValueObj(q);b(this.schema,this._schemaInfo._validateItemValue,l,this)}else for(var g=0,j=n.length;g<j;g++)q=n[g],b(this.schema,this._schemaInfo._validateItemValue,q,this)}catch(t){return t}return null},
get:function(a){if(J(a)||f.core.data.isObservableArray(a)){for(var b=[],c=0,d=a.length;c<d;c++)b.push(this._findById(a[c]));return b}return this._findById(a)},remove:function(a){this._manager||d(15006,[this.name,"remove"]);var b=this._manager?this._manager.isInUpdate():!1;b||this._manager.beginUpdate();for(var c=this._idKey,e=L(a),n=[],g=[],f=0,q=e.length;f<q;f++)if(this.has(e[f])){var h=x(e[f])||z(e[f],!0)?e[f]:e[f]._values[c],l=this.items[h];delete this.items[h];this.size--;g.push(l);l._model&&
(l._isRemoved=!0);n.push(l)}else g.push(null);0<n.length&&N(this,3,n);b||this._manager.endUpdate();return J(a)?g:g[0]},removeAll:function(){var a=this.toArray();0<a.length&&this.remove(a);return a},has:function(a){return x(a)||z(a,!0)?!!this._findById(a):"object"===typeof a?null!=a&&M(a.get)&&a===this.items[a.get(this._idKey)]:!1},getManager:function(){return this._manager},_findById:function(a){a=this.items[a];return typeof a===ja?null:a},_dispatchItemsChangeEvent:function(a){a={type:"itemsChange",
created:[],recreated:[],removed:[],changed:[a]};this.dispatchEvent(a);this._manager&&(a.target=this,this._manager._dataModelItemsChangeListener(a))},toArray:function(){var a=[],b=this.items,c;for(c in b)b.hasOwnProperty(c)&&a.push(b[c]);return a}});f.mixin.eventDispatcher.mix(Ia.prototype);a.extend(Ia.prototype,Oa,{validate:function(a){try{var c=a;2===arguments.length&&(c={},c[arguments[0]]=arguments[1]);b(this.schema,this._validateItemValue,c)}catch(d){return d}return null}});f.mixin.eventDispatcher.mix(ca.prototype);
var Ea={equals:function(a){var b=this.length;if(!J(a)&&!Q(a)||a.length!==b)return!1;for(var a=Q(a)?a._src:a,c=0;c<b;c++){var d=this[c],e=a[c];if(!(d===e||k(d)&&k(e)))return!1}return!0},copyFrom:function(a){null==a&&(a=[]);a=Q(a)?a._src:a;J(a)||d(15010,[0,a]);a=a.slice(0);a.unshift(0,this.length);Array.prototype.splice.apply(this,a)},get:function(a){return this[a]},set:function(a,b){this[a]=b},toArray:function(){return this.slice(0)},concat:function(){for(var a=f.u.obj.argsToArray(arguments),b=0,c=
a.length;b<c;b++)Q(a[b])&&(a[b]=a[b].toArray());return this.concat.apply(this,a)}},Fa="concat,join,pop,push,reverse,shift,slice,sort,splice,unshift,indexOf,lastIndexOf,every,filter,forEach,map,some,reduce,reduceRight".split(","),ka;for(ka in Ea)Ea.hasOwnProperty(ka)&&-1===a.inArray(ka,Fa)&&Fa.push(ka);var Ha=["concat","slice","splice","filter","map"],$a=["reverse","sort"],Qa="sort,reverse,pop,shift,unshift,push,splice,copyFrom,set".split(",");ka=0;for(var Ya=Fa.length;ka<Ya;ka++){var Ra=Fa[ka];ca.prototype[Ra]=
function(b){function c(){var e=d.apply(this._src,arguments);if(-1!==a.inArray(b,$a))e=this;else if(-1!==a.inArray(b,Ha)){var n=ga();n.copyFrom(e);e=n}return e}var d=Ea[b]?Ea[b]:Array.prototype[b];return-1===a.inArray(b,Qa)?c:function(){if(!this.dispatchEvent({type:"changeBefore",method:b,args:arguments})){var a=c.apply(this,arguments);this.length=this._src.length;this.dispatchEvent({type:"change",method:b,args:arguments,returnValue:a});return a}}}(Ra)}f.u.obj.expose("h5.core.data",{createManager:function(a,
b){ia(a)||d(da);var c=new aa(a);if(null!=b){""===b&&(b="window");var e={};e[a]=c;f.u.obj.expose(b,e)}return c},createObservableArray:ga,createObservableItem:function(a){v(a,!1,null,!0);var c=u(a);D(a,c,!0);var d=new Ia,c=O(a,c);j(d,a,c);d.schema=a;for(var e in c)d[e]=c[e];e=c._createInitialValueObj();b(a,c._validateItemValue,e);g(d,e,null,!0);a=0;for(c=d._aryProps.length;a<c;a++)m(d,d._aryProps[a],d.get(d._aryProps[a]));return d},isObservableArray:Q,isObservableItem:function(a){return!(!a||!a.constructor||
!a._validateItemValue||M(a.getModel))},createSequence:function(b,c,d){function e(){return h}function n(){var a=h;h+=l;return a}function g(){return h.toString()}function f(){var a=h;h+=l;return a.toString()}function q(){}var h=null!=b?b:1,l=null!=c?c:1,b=1===d?{current:g,next:f,returnType:1}:{current:e,next:n,returnType:2};b.setCurrent=function(a){h=a};a.extend(q.prototype,b);return new q},SEQ_STRING:1,SEQ_INT:2})})();(function(){function h(a,b){return!a||a.nodeType!==U?void 0:a.getAttribute(b)}function C(a){if(!a)return null;
for(var b=[],c=0,d=a.length;c<d;c++)b.push(a[c]);return b}function k(a,b,c,d){var e=[],b=L(b);if(!0===d)return o(e,a,b,c),e;for(var a=a.childNodes,d=0,g=a.length;d<g;d++)o(e,a[d],b,c);return e}function o(a,b,c,d){if(b.nodeType===U){for(var e=0,g=c.length;e<g;e++){var f=b.getAttribute(c[e]);if(typeof d===ja){if(null!==f){a.push(b);break}}else if(null!==f&&f==d){a.push(b);break}}if(0<b.childNodes.length){b=b.childNodes;e=0;for(g=b.length;e<g;e++)o(a,b[e],c,d)}}}function z(b,c){for(var b=L(b),d=[],e=
0,f=b.length;e<f;e++){var j=b[e];if(j.nodeType===U&&!(!0===c&&(null!=h(j,l)||null!=h(j,N))))for(var m=k(j,g,void 0,!0),s=0,o=m.length;s<o;s++){for(var r=!0,p=m[s];null!=p&&p!==j;p=p.parentNode)if(null!=h(p,l)||null!=h(p,N)){r=!1;break}r&&d.push(m[s])}}return a(d)}function x(b,c,d){for(var e=[],g=0,f=b.length;g<f;g++){var j=b[g];if(j.nodeType===U){if(!0===d){if(null!=j.getAttribute(c)){e.push(j);continue}if(null!=h(j,l)||null!=h(j,N))continue}for(var m=k(j,c,void 0,!1),s=0,o=m.length;s<o;s++){var r=
a(m[s])[0],p=r.parentNode;(null==h(p,l)&&null==h(p,N)||p===j)&&e.push(r)}}}return a(e)}function v(a){return a&&a.addEventListener&&a.getModel&&!J(a)&&!f.core.data.isObservableArray(a)||f.core.data.isObservableItem(a)?!0:!1}function D(a,b){for(var c=0,d=a.length;c<d;c++){var g=a[c];g.nodeType===U&&g.setAttribute(e,b)}}function u(b,c,e){var g=Q++,j=c[0];a(j).empty();if(e){!J(e)&&!f.core.data.isObservableArray(e)&&d(ca);D(c,g);b._addBindingEntry(e,j,g);f.core.data.isObservableArray(e)&&!b._isWatching(e)&&
(c=function(a){b._observableArray_changeListener(a)},b._listeners[b._getContextIndex(e)]=c,e.addEventListener("change",c));var c=h(j,G),c=C(b._getSrcCtxNode(c).childNodes),l=[];b._loopElementsMap[g]=l;for(var g=j.ownerDocument.createDocumentFragment(),m=e.get?function(a){return e.get(a)}:function(a){return e[a]},k=0,s=e.length;k<s;k++){for(var o=[],r=0,p=c.length;r<p;r++){var B=W(c[r]);o.push(B);g.appendChild(B)}l[k]=o;j.appendChild(g);w(b,o,m(k),!1,!0)}}}function w(a,b,c,e,g){b=L(b);if(e)u(a,b,c);
else{e=Q++;c&&(("object"!==typeof c||J(c)||f.core.data.isObservableArray(c))&&d(ca),D(b,e),a._addBindingEntry(c,b,e));var j=v(c);j&&!a._isWatching(c)&&(e=function(b){a._observableItem_changeListener(b)},a._listeners[a._getContextIndex(c)]=e,c.addEventListener("change",e));z(b,g).each(function(){p(this,c,j)});r(a,b,c,!1,g);r(a,b,c,!0,g)}}function r(a,b,c,d,e){var g=d?"data-h5-loop-context":"data-h5-context";x(b,g,e).each(function(){var b=h(this,g),e=null;c&&(e=v(c)?c.get(b):c[b]);w(a,this,e,d)})}function p(b,
c,e){for(var f=h(b,g).split(aa),j=[],l=[],k=[],s=0,o=f.length;s<o;s++){var r=f[s];if(-1===r.indexOf(m))0<a.trim(r).length&&(j.push(null),l.push(null),k.push(a.trim(r)));else{var p=r.split(m),r=a.trim(p[0]),p=a.trim(p[1]),B=null,u=na.exec(r);u&&(B=u[1],r=/(\S+)[\s\(]/.exec(r)[1]);0<r.length&&0<p.length&&(j.push(r),l.push(B),k.push(p))}}f=b.tagName.toLowerCase();s=a(b);o=0;for(r=j.length;o<r;o++){var B=j[o],u=l[o],n=k[o],p=null;c&&(p=e?c.get(n):c[n]);null==B&&("input"===f?(B="attr",u="value"):B="text");
switch(B){case "text":null==p?s.text(""):s.text(p);break;case "html":null==p?s.html(""):s.html(p);break;case "class":var B=h(b,O),n=(u=null==B)?"":" ",A=!1;p&&(A=!RegExp("\\s"+p+"\\s").test(" "+B+" "));s[0].className=(u?"":B)+(A?n+p:"");break;case "attr":u||d(oa);"input"===f&&"value"===u?null==p?s.val(""):s.val(p):null==p?s.removeAttr(u):s.attr(u,p);break;case "style":u||d(oa);null==p?s.css(u,""):s.css(u,p);break;default:d(M)}}}function j(a,b,c){for(var d=0,e=c.length;d<e;d++){var g=c[d];b.removeChild(g);
a._removeBinding(g)}}function s(a){for(var a=a.childNodes,b=[],c=0,d=a.length;c<d;c++)b.push(W(a[c]));return b}function B(a,b,c,d,e){for(var g=c.ownerDocument.createDocumentFragment(),f=[],j=0,h=e.length;j<h;j++){var l=s(c);f[j]=l;for(var m=0,k=l.length;m<k;m++)g.appendChild(l[m]);w(a,l,e[j])}Array.prototype[d].apply(b,f);return g}function c(a,b,c,d,e,g){var f=d.length;if(0!==f){for(var l=d[0],h=l,c=1===f?c.length:h+d[1];h<c;h++){var m=e[h];m&&j(a,b,m)}e.splice(l,d[1]);if(!(2>=f)){h=e.length;h=0===
h||0===l?b.firstChild:l>=h?null:e[l][0];c=g.ownerDocument.createDocumentFragment();l=[l,0];for(m=2;m<f;m++){for(var k=s(g),o=0,p=k.length;o<p;o++)c.appendChild(k[o]);w(a,k,d[m]);l.push(k)}b.insertBefore(c,h);Array.prototype.splice.apply(e,l)}}}function b(a,b){void 0!==a.nodeType?a.nodeType===U&&(this._parent=a.parentNode,this._targets=[a]):(this._parent=a[0].parentNode,this._targets=C(a));this._bindRootId=S++;ta[this._bindRootId]=this;for(var c=[],d=0,e=this._targets.length;d<e;d++){var f=this._targets[d];
if(f.nodeType===U){f.setAttribute(F,this._bindRootId);for(var j=k(f,[l,N],void 0,!0),m=0,s=j.length;m<s;m++){var o=ga++;j[m].setAttribute(G,o)}j=k(f,g,void 0,!0);m=0;for(s=j.length;m<s;m++)o=j[m],/class\s*:/.test(h(o,g))&&""!=o.className&&o.setAttribute(O,o.className)}c.push(f.cloneNode(!0))}this._srces=c;this._loopElementsMap={};this._rootContext=b;this._usingContexts=[];this._srcToViewMap={};this._listeners={};w(this,this._targets,this._rootContext,!1,!0)}var g="data-h5-bind",l="data-h5-context",
N="data-h5-loop-context",G="data-h5-dyn-ctx",e="data-h5-dyn-vid",F="data-h5-dyn-bind-root",O="data-h5-dyn-cn",m=":",aa=";",na=/\(\s*(\S+)\s*\)/,oa=7100,M=7101,ca=7102,ga=0,Q=0,S=0,ta={},da={},W;(function(){var b=document.createElement("div");b.h5Dummy="a";var c=b.cloneNode(!1),d=void 0!==c.h5Dummy;b.h5Dummy=void 0;d?(c.h5Dummy=void 0,W=function(b){var c=b.ownerDocument;return b.nodeType===U?a(a.trim(b.outerHTML),c)[0]:b.cloneNode(!0)}):W=function(a){return a.cloneNode(!0)}})();a.extend(b.prototype,
{unbind:function(){for(var a=0,b=this._targets.length;a<b;a++){var c=this._targets[a];if(c.nodeType===U){this._removeBinding(c);c.removeAttribute(F);for(var d=k(c,O,void 0,!0),e=0,g=d.length;e<g;e++)d[e].removeAttribute(O);c=k(c,G,void 0,!0);e=0;for(d=c.length;e<d;e++)c[e].removeAttribute(G)}}delete ta[this._bindRootId]},_observableArray_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b)for(var d in b)if(b.hasOwnProperty(d)){var e=b[d],g=this._getSrcCtxNode(h(e,G)),f=this._loopElementsMap[d];
switch(a.method){case "set":c(this,e,a.target,[a.args[0],1,a.args[1]],f,g);break;case "shift":case "pop":var l=f[a.method]();l&&j(this,e,l);break;case "unshift":l=B(this,f,g,a.method,a.args);e.insertBefore(l,e.firstChild);break;case "push":l=B(this,f,g,a.method,a.args);e.appendChild(l);break;case "splice":c(this,e,a.target,a.args,f,g);break;case "reverse":for(var l=e,m=f;l.firstChild;)l.removeChild(l.firstChild);for(var k=0,e=m.length;k<e;k++)for(var g=m[k],o=g.length-1;0<=o;o--)l.insertBefore(g[o],
l.firstChild);f.reverse();break;case "sort":case "copyFrom":case null:for(var l=this._loopElementsMap,m=d,k=a.target,o=f,f=g,g=0,p=o.length;g<p;g++)j(this,e,o[g]);for(var o=e.ownerDocument.createDocumentFragment(),p=[],g=0,r=k.length;g<r;g++){var u=s(f);p[g]=u;for(var n=0,A=u.length;n<A;n++)o.appendChild(u[n]);w(this,u,k.get(g))}e.appendChild(o);l[m]=p}}},_observableItem_changeListener:function(a){var b=this._getViewsFromSrc(a.target);if(b){var c=!1;a.target===this._rootContext&&(c=!0);var d=this,
e;for(e in b)if(b.hasOwnProperty(e)){var g=b[e];z(g,c).each(function(){p(this,a.target,!0)});x(g,l).each(function(){var b=h(this,l);if(!(b in a.props))return!0;d._removeBinding(this);var c=h(this,G),c=d._getSrcCtxNode(c),c=W(c);this.parentNode.replaceChild(c,this);w(d,c,a.props[b].newValue)});x(g,N).each(function(){var b=h(this,N);if(!(b in a.props)||a.target._isArrayProp(b))return!0;d._removeBinding(this);w(d,this,a.props[b].newValue,!0)})}}},_getSrcCtxNode:function(a){for(var b=0,c=this._srces.length;b<
c;b++){var d=this._srces[b];if(h(d,G)===a)return d;d=k(d,G,a);if(0<d.length)return d[0]}return null},_isWatching:function(a){a=this._getContextIndex(a);return-1===a?!1:null!=this._listeners[a]},_getContextIndex:function(b){return a.inArray(b,this._usingContexts)},_addBindingEntry:function(a,b,c){var d=this._getContextIndex(a);-1===d&&(this._usingContexts.push(a),d=this._usingContexts.length-1);da[c]=a;(a=this._srcToViewMap[d])?a[c]=b:(a={},a[c]=b,this._srcToViewMap[d]=a)},_hasBindingForSrc:function(a){for(var b in a)if(a.hasOwnProperty(b))return!0;
return!1},_removeBindingEntry:function(a){var b=da[a];if(b){var c=this._getContextIndex(b);if(-1!==c){var d=this._srcToViewMap[c];d&&d[a]&&(delete d[a],this._hasBindingForSrc(d)||(d=!1,v(b)?(b.removeEventListener("change",this._listeners[c]),d=!0):f.core.data.isObservableArray(b)&&(b.removeEventListener("change",this._listeners[c]),d=!0),d&&delete this._listeners[c],delete this._srcToViewMap[c],this._usingContexts[c]=null))}da[a]&&delete da[a]}},_removeBinding:function(a){if(a.nodeType===U){var b=
h(a,e);null!=b&&(this._removeBindingEntry(b),a.removeAttribute(e));for(var a=k(a,e),b=0,c=a.length;b<c;b++){var d=a[b];this._removeBindingEntry(h(d,e));d.removeAttribute(e)}}},_getViewsFromSrc:function(a){a=this._getContextIndex(a);return-1===a?null:this._srcToViewMap[a]}});eb={createBinding:function(a,c){return new b(a,c)}}})();(function(){function h(d){return f.u.obj.isJQueryObject(d)?d:a(d)}function C(){this.__cachedTemplates={}}var k="[",o=7001,z=7002,I=7003,v=7010,D=7011,u=f.async.deferred,w=
{escapeHtml:function(a){return f.u.str.escapeHtml(a)}},r={MAX_CACHE:10,cache:{},cacheUrls:[],accessingUrls:{},append:function(a,d,f){this.cacheUrls.length>=this.MAX_CACHE&&this.deleteCache(this.cacheUrls[0]);this.cache[a]={};this.cache[a].templates=d;this.cache[a].path=f;this.cacheUrls.push(a)},deleteCache:function(a,d){d||delete this.cache[a];for(var f=0,c=this.cacheUrls.length;f<c;f++)if(this.cacheUrls[f]===a){this.cacheUrls.splice(f,1);break}},getTemplateByUrls:function(h){function s(b){if(0!==
b.length){var c={},e=[];b.each(function(){var b=a.trim(this.id),g=a.trim(this.innerHTML);b||d(z,null,{});try{var f=new EJS.Compiler(g,k);f.compile();c[b]=f.process;e.push(b)}catch(l){g=l.lineNumber,d(v,[g?" line:"+g:"",l.message],{id:b,error:l,lineNo:g})}});return{compiled:c,data:{ids:e}}}}function p(b,c,d){f.ajax(c).done(function(c,e,g){delete l.accessingUrls[b];c=a(g.responseText).filter(function(){return this.tagName&&-1===this.tagName.indexOf("/")&&8!==this.nodeType});e=this.url;if(0<c.not('script[type="text/ejs"]').length)d.reject(Z(D,
null,{url:b,path:e}));else{g=null;try{g=s(c.filter('script[type="text/ejs"]'))}catch(f){f.detail.url=b;f.detail.path=e;d.reject(f);return}var h,j;try{var m=g.compiled;j=g.data;j.path=e;j.absoluteUrl=b;h=m;l.append(b,m,e)}catch(k){d.reject(Z(o,null,{error:k,url:b,path:e}));return}d.resolve({ret:h,data:j})}}).fail(function(a){delete l.accessingUrls[b];d.reject(Z(I,[a.status,b],{url:b,path:c,error:a}))})}for(var c={},b=[],g=[],l=this,r=function(a){var b=l.cache[a].templates;l.deleteCache(a,!0);l.cacheUrls.push(a);
return b},w=0;w<h.length;w++){var e=h[w],F=$(e);if(this.cache[F])a.extend(c,r(F)),g.push({absoluteUrl:F});else if(this.accessingUrls[F])b.push(this.accessingUrls[F]);else{var C=f.async.deferred();b.push(this.accessingUrls[F]=C.promise());p(F,e,C)}}var m=u();f.async.when(b).done(function(){for(var b=f.u.obj.argsToArray(arguments),d=0,e=b.length;d<e;d++)a.extend(c,b[d].ret),g.push(b[d].data);m.resolve(c,g)}).fail(function(a){m.reject(a)});return m.promise()}};a.extend(C.prototype,{load:function(f){var h=
u(),k=this,c=null;switch(a.type(f)){case "string":a.trim(f)||d(7004);c=[f];break;case "array":c=f;0===c.length&&d(7004);for(var f=0,b=c.length;f<b;f++)x(c[f])?a.trim(c[f])||d(7004):d(7004);break;default:d(7004)}r.getTemplateByUrls(c).done(function(b,c){a.extend(k.__cachedTemplates,b);h.resolve(c)}).fail(function(a){h.reject(a)});return h.promise()},getAvailableTemplates:function(){var a=[],d;for(d in this.__cachedTemplates)a.push(d);return a},register:function(f,h){"string"!==a.type(h)?d(7E3,null,
{id:f}):(!x(f)||!a.trim(f))&&d(z,[]);try{var o=new EJS.Compiler(h,k);o.compile();this.__cachedTemplates[f]=o.process}catch(c){o=c.lineNumber,d(v,[o?" line:"+o:"",c.message],{id:f})}},isValid:function(a){try{return(new EJS.Compiler(a,k)).compile(),!0}catch(d){return!1}},get:function(f,h){var k=this.__cachedTemplates;(!x(f)||!a.trim(f))&&d(z);(k=k[f])||d(7005,f);var c=h?a.extend(!0,{},h):{},b=c.hasOwnProperty("_h")?new EJS.Helpers(c):new EJS.Helpers(c,{_h:w}),g=null;try{g=k.call(c,c,b)}catch(l){d(7006,
l.toString(),l)}return g},update:function(a,d,f){return h(a).html(this.get(d,f))},append:function(a,d,f){return h(a).append(this.get(d,f))},prepend:function(a,d,f){return h(a).prepend(this.get(d,f))},isAvailable:function(a){return!!this.__cachedTemplates[a]},clear:function(f){if(typeof f===ja)this.__cachedTemplates={};else{var h=null;switch(a.type(f)){case "string":h=[f];break;case "array":f.length||d(z);h=f;break;default:d(z)}for(var f=0,k=h.length;f<k;f++){var c=h[f];(!x(c)||!a.trim(c))&&d(z)}f=
0;for(k=h.length;f<k;f++)delete this.__cachedTemplates[h[f]]}},bind:function(h,k){var o=null;null==h&&d(7007);J(h)?o=h:(o=a(h),0===o.length&&d(7007),o=o.toArray());(null==k||"object"!==typeof k||J(k)||f.core.data.isObservableArray(k))&&d(7009);return eb.createBinding(o,k)}});var p=new C;p.createView=function(){return new C};a(function(){a('script[type="text/ejs"]').each(function(){var d=a.trim(this.id),f=a.trim(this.innerHTML);0!==f.length&&d&&(f=new EJS.Compiler(f,k),f.compile(),p.__cachedTemplates[d]=
f.process)})});f.u.obj.expose("h5.core",{view:p})})();(function(){function d(b){var c={},e;for(e in da){var f=a("<div></div>").addClass(b).addClass(e).appendTo("body"),g=a.camelCase(e);c[g]={};a.map(da[e],function(a){c[g][a]="width"===a||"height"===a?parseInt(f.css(a).replace(/\D/g,""),10):f.css(a)});f.remove()}return c}function C(a,b,c){var a=b.createElement("v:"+a),d;for(d in c)a.style[d]=c[d];return a}function k(a,b){for(var c=[],d=a/2,e=0.8*a/2,f=360/b*Math.PI/180,g=1;g<=b;g++){var h=f*g,l=Math.cos(h),
h=Math.sin(h);c.push({from:{x:d+e/2*l,y:d+e/2*h},to:{x:d+e*l,y:d+e*h}})}return c}function o(a){return function(){var b=document.body,c=document.documentElement,d=y?b:H?c:null;return d?"Height"===a?d["client"+a]>d["scroll"+a]?d["client"+a]:d["scroll"+a]:d["client"+a]:Math.max(b["scroll"+a],c["scroll"+a],b["offset"+a],c["offset"+a],c["client"+a])}}function z(a){return function(){var b=y?document.body:document.documentElement;return window["page"+("Top"===a?"Y":"X")+"Offset"]||b["scroll"+a]}}function I(a){var b=
y?document.body:document.documentElement;return Q.isiOS?window["inner"+a]:b["client"+a]}function v(b){var c=a(b)[0],d=document.body,e=a("html")[0],b={top:0,left:0};if(c===d&&H)return{top:parseFloat(e.currentStyle.paddingTop||0)+parseFloat(d.currentStyle.marginTop||0)+parseFloat(d.currentStyle.borderTop||0),left:parseFloat(e.currentStyle.paddingLeft||0)+parseFloat(d.currentStyle.marginLeft||0)+parseFloat(d.currentStyle.borderLeft||0)};"undefined"!==typeof c.getBoundingClientRect&&(b=c.getBoundingClientRect());
d=y?d:document.documentElement;c=d.clientTop||0;d=d.clientLeft||0;return{top:b.top+pa()-c,left:b.left+qa()-d}}function D(){a.each($(arguments),function(a,b){b.bind("click dblclick touchstart touchmove touchend mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave focus focusin focusout blur change select",function(){return!1})})}function u(a){a=X(a)?a[0]:a;return a===window||a===document||a===document.body}function w(a){return Y(S(a)).getComputedStyle(a,null)}function r(b,c){return!Y(S(b)).getComputedStyle?
a(b).css(c):w(b)[c]}function p(b){if(!Y(S(b)).getComputedStyle)return a(b).height();var c=w(b);return b.offsetHeight-parseFloat(c.paddingTop)-parseFloat(c.paddingBottom)}function j(b){if(!Y(S(b)).getComputedStyle)return a(b).width();var c=w(b);return b.offsetWidth-parseFloat(c.paddingLeft)-parseFloat(c.paddingRight)}function s(b,c){if(!Y(S(b)).getComputedStyle)return a(b).outerHeight();var d=w(b);return p(b)+parseFloat(d.paddingTop)+parseFloat(d.paddingBottom)+parseFloat(d.borderTopWidth)+parseFloat(d.borderBottomWidth)+
(c?parseFloat(d.marginTop)+parseFloat(d.marginBottom):0)}function B(b,c){if(!Y(S(b)).getComputedStyle)return a(b).outerWidth();var d=w(b);return j(b)+parseFloat(d.paddingLeft)+parseFloat(d.paddingRight)+parseFloat(d.borderLeftWidth)+parseFloat(d.borderRightWidth)+(c?parseFloat(d.marginLeft)+parseFloat(d.marginRight):0)}function c(b){if(!Y(S(b)).getComputedStyle)return a(b).innerHeight();var c=w(b);return p(b)+parseFloat(c.paddingTop)+parseFloat(c.paddingBottom)}function b(b){if(!Y(S(b)).getComputedStyle)return a(b).innerWidth();
var c=w(b);return j(b)+parseFloat(c.paddingLeft)+parseFloat(c.paddingRight)}function g(b,c,d,e){function f(){h+=g;h>d?(clearInterval(m),c.each(function(a){for(var c in b[a])this.style[c]=""}),e()):c.each(function(b){var c=l[b],d;for(d in c)c[d]+=j[b][d];a(this).css(c)})}var g=ga,h=0,l=[],j=[];c.each(function(a){var e=b[a];j[a]={};l[a]={};var f=w(c[a]),h;for(h in e)l[a][h]=parseFloat(f[h]),j[a][h]=(parseFloat(e[h])-parseFloat(f[h]))*g/d});f();var m=setInterval(f,g)}function l(a,b,c){var d=[];a.each(function(){var a=
parseFloat(r(this,"opacity"));d.push({opacity:a})});a.css({opacity:0,display:"block"});g(d,a,b,c)}function N(a,b,c){var d=[];a.each(function(){d.push({opacity:0})});g(d,a,b,c)}function G(b,c){this.style=a.extend(!0,{},b);if(!c.getElementById(oa)){c.namespaces.add("v","urn:schemas-microsoft-com:vml");var d=c.createElement("style");c.getElementsByTagName("head")[0].appendChild(d);d.id=oa;d.setAttribute("type","text/css");d.styleSheet.cssText="v\\:stroke,v\\:line,v\\:textbox { behavior:url(#default#VML); }"}d=
this.style.throbber.width;this.group=C("group",c,{width:d+"px",height:this.style.throbber.height+"px"});this.group.className=L;for(var d=k(d,this.style.throbber.lines),e=this.style.throbberLine.color,f=this.style.throbberLine.width,g=0,h=d.length;g<h;g++){var l=d[g],j=l.from,m=l.to,l=C("line",c);l.strokeweight=f;l.strokecolor=e;l.fillcolor=e;l.from=j.x+","+j.y;l.to=m.x+","+m.y;j=C("stroke",c);j.opacity=1;l.appendChild(j);this.group.appendChild(l)}this._createPercentArea(c)}function e(b,c){var e=this,
g=a(b);if(g.length){var l=u(g),g=l?a("body"):g,j=S(g[0]);if(j!==window.document&&(g[0]===j||Y(j)===g[0]))g=a(j.body);var k=a.extend(!0,{},{message:"",percent:-1,block:!0,fadeIn:-1,fadeOut:-1,promises:null,theme:"a"},c);this._displayed=!1;this._throbbers=[];this._settings=k;this._styles=a.extend(!0,{},{throbber:{roundTime:1E3,lines:12},throbberLine:{},percent:{}},d(k.theme));this._isScreenLock=l;this._$target=g;this._target=1===this._$target.length?this._$target[0]:this._$target.toArray();this._scrollEventTimerId=
null;this._scrollHandler=function(){e._handleScrollEvent()};this._resizeEventTimerId=null;this._resizeHandler=function(){e._handleResizeEvent()};this._redrawable=!0;this._lastPercent=-1;this._lastMessage=null;this._fadeInTime="number"===typeof k.fadeIn?k.fadeIn:-1;this._fadeOutTime="number"===typeof k.fadeOut?k.fadeOut:-1;this._$content=a();this._$overlay=a();this._$skin=a();for(var g=f.u.str.format(U,""===k.message?'style="display: none;"':"",k.message),l="https"===document.location.protocol?"return:false":
"about:blank",o=0,p=this._$target.length;o<p;o++)this._$content=this._$content.add(a(j.createElement("div")).append(g).addClass(F).addClass(k.theme).addClass(O).css("display","none")),this._$overlay=this._$overlay.add((k.block?a(j.createElement("div")):a()).addClass(F).addClass(k.theme).addClass(m).css("display","none")),this._$skin=this._$skin.add((H||y?a(j.createElement("iframe")):a()).attr("src",l).addClass(F).addClass(aa).css("display","none"));var q=this._isScreenLock&&T?"fixed":"absolute";a.each([this._$overlay,
this._$content],function(){this.css("position",q)});j=k.promises;k=function(){e.hide()};g=a.hasOwnProperty("curCSS")?"pipe":"then";J(j)?(j=a.map(j,function(a){return a&&M(a.promise)?a:null}),0<j.length&&sa(f.async.when(j),g,[k,k])):j&&M(j.promise)&&sa(j,g,[k,k])}}var F="h5-indicator",O="content",m="overlay",aa="skin",L="vml-root",oa="h5-vmlstyle",U='<span class="indicator-throbber"></span><span class="indicator-message" {0}>{1}</span>',ca=500,ga=13,Q=f.env.ua,X=f.u.obj.isJQueryObject,$=f.u.obj.argsToArray,
da={throbber:["width","height"],"throbber-line":["width","color"]},W=!!document.createElement("canvas").getContext,q=function(){var a=document.createDocumentFragment().appendChild(document.createElement("div"));a.innerHTML='<v:line strokeweight="1"/>';a=a.firstChild;a.style.behavior="url(#default#VML)";return"number"===typeof a.strokeweight}(),y="CSS1Compat"!==document.compatMode,H=Q.isIE&&6>=Q.browserVersion,t=Q.isChrome&&Q.isDesktop,T=!(Q.isAndroidDefaultBrowser||Q.isiOS&&5>Q.browserVersion||H||
y||Q.isWindowsPhone),fa=null,ba=null,Z=null,ia=null,pa=null,qa=null,ma=function(){var b=document.createDocumentFragment().appendChild(document.createElement("div")),c=["Webkit","Moz","O","ms","Khtml"],d=c.length;return function(e){e=a.camelCase(e);if(e in b.style)return!0;for(var e=e.charAt(0).toUpperCase()+e.slice(1),f=0;f<d;f++)if(c[f]+e in b.style)return!0;return!1}}(),ba=function(a){return function(){var b=document.body,c=document.documentElement;return"number"===typeof window["inner"+a]?window["inner"+
a]:y?b["client"+a]:c["client"+a]}}("Height"),Z=o("Height"),ia=o("Width"),pa=z("Top"),qa=z("Left"),fa=ma("animationName");G.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.group),this._run())},hide:function(){this.root.innerHTML="";this._runId&&(clearTimeout(this._runId),this._runId=null)},_run:function(){for(var a=this.style.throbber.lines,b=this.style.throbber.roundTime,c=this.highlightPos,d=this.group.childNodes,e=0,f=d.length;e<f;e++){var g=
d[e];if("textbox"!==g.nodeName){var h=e+1;g.firstChild.opacity=h==c?"1":h==c+1||h==c-1?"0.75":"0.4"}}c==a?c=0:c++;this.highlightPos=c;var l=this;this._runId=setTimeout(function(){l._run.call(l)},Math.floor(b/a))},_createPercentArea:function(b){var c=C("textbox",b),b=a(b.createElement("table"));b.append("<tr><td></td></tr>");var d=b.find("td");d.width(this.group.style.width);d.height(this.group.style.height);d.css("line-height",this.group.style.height);d.addClass("throbber-percent");c.appendChild(b[0]);
this.group.appendChild(c)},setPercent:function(b){a(this.group).find(".throbber-percent").html(b)}};var la=function(b,c){this.style=a.extend(!0,{},b);this.canvas=c.createElement("canvas");this.baseDiv=c.createElement("div");this.percentDiv=c.createElement("div");var d=this.canvas,e=this.baseDiv,f=this.percentDiv;d.width=this.style.throbber.width;d.height=this.style.throbber.height;d.style.display="block";d.style.position="absolute";e.style.width=this.style.throbber.width+"px";e.style.height=this.style.throbber.height+
"px";e.appendChild(d);f.style.width=this.style.throbber.width+"px";f.style.height=this.style.throbber.height+"px";f.style.lineHeight=this.style.throbber.height+"px";f.className="throbber-percent";e.appendChild(f);this.positions=k(d.width,this.style.throbber.lines)};la.prototype={show:function(a){a&&(this.root=a,this.highlightPos=1,this.hide(),this.root.appendChild(this.baseDiv),this._run())},hide:function(){a(this.baseDiv).remove();this._runId&&(t?clearInterval(this._runId):clearTimeout(this._runId),
this._runId=null)},_run:function(){var a=this.canvas,b=a.getContext("2d"),c=this.highlightPos,d=this.positions,e=this.style.throbberLine.color,f=this.style.throbberLine.width,g=this.style.throbber.lines,h=this.style.throbber.roundTime;a.width=a.width;for(var l=0,j=d.length;l<j;l++){b.beginPath();b.strokeStyle=e;b.lineWidth=f;var k=l+1;b.globalAlpha=k==c?1:k==c+1||k==c-1?0.75:0.4;var m=d[l],k=m.from,m=m.to;b.moveTo(k.x,k.y);b.lineTo(m.x,m.y);b.stroke()}c==g?c=0:c++;this.highlightPos=c;if(t){var o=
0;this._runId=setInterval(function(){o++;a.style.webkitTransform="rotate("+o+"deg)";360<=o&&(o-=360)},h/360)}else if(fa)a.className="throbber-canvas";else{var p=this;this._runId=setTimeout(function(){p._run.call(p)},Math.floor(h/g))}},setPercent:function(a){this.percentDiv.innerHTML=a}};e.prototype={show:function(){if(this._displayed||!this._$target||0<this._$target.children("."+F).length)return this;this._displayed=!0;for(var b=this,c=this._fadeInTime,d=function(){var c=a(window);b._isScreenLock&&
(D(b._$overlay,b._$content),T||(c.bind("touchmove",b._scrollHandler),c.bind("scroll",b._scrollHandler)));c.bind("orientationchange",b._resizeHandler);c.bind("resize",b._resizeHandler)},e=0,f=this._$target.length;e<f;e++){var g=this._$target.eq(e),h=this._$content.eq(e),j=this._$skin.eq(e),k=this._$overlay.eq(e),m=r(g[0],"position");!this._isScreenLock&&"static"===m&&(g.data("before-position",m),g.data("before-zoom",r(g[0],"zoom")),g.css({position:"relative",zoom:"1"}));m=S(g[0]);if(m=W?new la(this._styles,
m):q?new G(this._styles,m):null)b._throbbers.push(m),b.percent(this._settings.percent),m.show(h.children(".indicator-throbber")[0]);g.append(j).append(k).append(h)}e=this._$skin.toArray();Array.prototype.push.apply(e,this._$content.toArray());Array.prototype.push.apply(e,this._$overlay.toArray());e=a(e);0>c?(e.css("display","block"),d()):l(e,c,d);this._reposition();this._resizeOverlay();return this},_resizeOverlay:function(){var a,b;if(!this._isScreenLock||!T)for(var c=0,d=this._$target.length;c<
d;c++){b=this._$target.eq(c);var e=this._$overlay.eq(c),f=this._$skin.eq(c);if(this._isScreenLock)a=ia(),b=Z();else{var g=b[0];a=g.scrollWidth;b=g.scrollHeight;if(H)a=Math.max(a,g.clientWidth),b=Math.max(b,g.clientHeight);else if(Q.isIE&&"function"===typeof getComputedStyle){var g=Y(S(g)).getComputedStyle(g,null),h=parseFloat(g.width)+parseFloat(g.paddingLeft)+parseFloat(g.paddingRight);a+=h-parseInt(h)-1;g=parseFloat(g.height)+parseFloat(g.paddingTop)+parseFloat(g.paddingBottom);b+=g-parseInt(g)-
1}}e[0].style.width=a+"px";e[0].style.height=b+"px";if(H||y)f[0].style.width=a+"px",f[0].style.height=b+"px"}},_reposition:function(){for(var d=0,e=this._$target.length;d<e;d++){var g=this._$target.eq(d),f=this._$content.eq(d);if(this._isScreenLock){var h=ba();T?f.css("top",(h-s(f[0]))/2+"px"):f.css("top",pa()+h/2-s(f[0])/2+"px")}else f.css("top",g.scrollTop()+(c(g[0])-s(f[0]))/2);var h=b(f[0])-j(f[0]),l=0;f.children().each(function(){var b=a(this);if("none"===r(b[0],"display"))return!0;l+=B(this,
!0)});f.css("width",l+h);f.css("left",g.scrollLeft()+(b(g[0])-B(f[0]))/2)}},hide:function(){if(!this._displayed)return this;this._displayed=!1;var b=this,c=this._fadeOutTime,d=this._$skin.toArray();Array.prototype.push.apply(d,this._$content.toArray());Array.prototype.push.apply(d,this._$overlay.toArray());var e=a(d),d=function(){var c=a(window);e.remove();b._isScreenLock||b._$target.each(function(b,c){var d=a(c);d.css({position:d.data("before-position"),zoom:d.data("before-zoom")});d.removeData("before-position").removeData("before-zoom")});
c.unbind("touchmove",b._scrollHandler);c.unbind("scroll",b._scrollHandler);c.unbind("orientationchange",b._resizeHandler);c.unbind("resize",b._resizeHandler);b._resizeEventTimerId&&clearTimeout(b._resizeEventTimerId);b._scrollEventTimerId&&clearTimeout(b._scrollEventTimerId)};if(!fa||t)for(var g=0,f=this._throbbers.length;g<f;g++)this._throbbers[g].hide();0>c?(e.css("display","none"),d()):N(e,c,d);return this},percent:function(a){if("number"!==typeof a||!(0<=a&&100>=a))return this;if(!this._redrawable)return this._lastPercent=
a,this;for(var b=0,c=this._throbbers.length;b<c;b++)this._throbbers[b].setPercent(a);return this},message:function(a){if(!x(a))return this;if(!this._redrawable)return this._lastMessage=a,this;this._$content.children(".indicator-message").css("display","inline-block").text(a);this._reposition();return this},_handleScrollEvent:function(){this._scrollEventTimerId&&clearTimeout(this._scrollEventTimerId);if(this._redrawable){var a=this;this._scrollEventTimerId=setTimeout(function(){a._reposition();a._scrollEventTimerId=
null},50)}},_handleResizeEvent:function(){function a(){b._resizeOverlay();b._reposition();b._redrawable=!0;b.percent(b._lastPercent);b.message(b._lastMessage);b._resizeEventTimerId=null}var b=this;this._resizeEventTimerId&&clearTimeout(this._resizeEventTimerId);this._redrawable=!1;T||H||y?a():this._resizeEventTimerId=setTimeout(function(){a()},1E3)}};f.u.obj.expose("h5.ui",{indicator:function(a,b){return new e(a,b)},isInView:function(b,c){var d,e,g,f,h=a(b);if(typeof c===ja)e=I("Height"),f=I("Width"),
d=pa(),g=qa();else{f=a(c);if(0===f.find(h).length)return;g=v(f);d=g.top+parseInt(f.css("border-top-width"));g=g.left+parseInt(f.css("border-left-width"));e=f.innerHeight();f=f.innerWidth()}e=d+e;f=g+f;var l=v(h),j=l.top,l=l.left,k=j+h.outerHeight(),h=l+h.outerWidth();return(d<=j&&j<e||d<k&&k<=e)&&(g<=l&&l<f||g<h&&h<=f)},scrollToTop:function(){function b(){1===window.scrollY&&(c=0);0<c&&(window.scrollTo(0,1),c--,setTimeout(b,ca))}var c=3;window.scrollTo(0,1);1!==a(window).scrollTop()&&setTimeout(b,
ca)}})})();(function(){function h(){var c=a.mobile.activePage,c=c&&c[0]&&c[0].id;return x(c)&&0<c.length?c:null}function C(){var c=h();null!==c&&a(function(){I.addCSS(c);I.bindController(c)})}function k(a,b){for(var d in D)for(var f=D[d],h=a===d,j=0,e=f.length;j<e;j++){var k=f[j];if(h)k[(b?"enable":"disable")+"Listeners"]()}for(d in u){f=u[d];h=a===d;j=0;for(e=f.length;j<e;j++)if(k=f[j],h)k[(b?"enable":"disable")+"Listeners"]()}}function o(a,b){a=a.replace(/(\.0+)+$/,"");b=b.replace(/(\.0+)+$/,"");
if(a===b)return 0;for(var d=a.split("."),f=b.split("."),h=d.length,j=0;j<h;j++){if(null==f[j])return 1;var e=parseInt(d[j],10),k=parseInt(f[j],10);if(e!==k)return e<k?-1:1}return null!=f[h]?-1:0}var z,I=null,v={},D={},u={},w={},r={},p=!1,j=!1,s=!1;f.u.obj.ns("h5.ui.jqm");f.ui.jqm.dataPrefix="h5";var B={__name:"JQMController",__ready:function(){var c=this,b=h();a(':jqmData(role="page"), :jqmData(role="dialog")').each(function(){c.loadScript(this.id)});var d=this.$find("#"+b);d.one("h5controllerready.emulatepageshow",
function(){s&&d[0]===a.mobile.activePage[0]&&d.trigger("h5jqmpageshow",{prevPage:a("")})})},':jqmData(role="page"), :jqmData(role="dialog") pageinit':function(a){z||this._initPage(a.event.target.id)},':jqmData(role="page"), :jqmData(role="dialog") pagecreate':function(a){z&&this._initPage(a.event.target.id)},_initPage:function(a){this.loadScript(a);this.addCSS(a);this.bindController(a)},"{rootElement} pageremove":function(c){a(c.event.target).trigger("h5jqmpagehide",{nextPage:a.mobile.activePage});
j=!0;var c=c.event.target.id,b=D[c],d=u[c];if(b){for(var f=0,h=b.length;f<h;f++)b[f].dispose();D[c]=[]}if(d){f=0;for(h=d.length;f<h;f++)d[f].dispose();u[c]=[]}},"{rootElement} pagebeforeshow":function(a){a=a.event.target.id;this.addCSS(a);k(a,!0)},"{rootElement} pagehide":function(c){j||a(c.event.target).trigger("h5jqmpagehide",{nextPage:c.evArg.nextPage});j=!1;c=c.event.target.id;k(c,!1);this.removeCSS(c)},"{rootElement} pageshow":function(c){var b=!1,d=a(c.event.target),f=c.evArg?c.evArg.prevPage:
a("");if(c=D[d[0].id])for(var h=0,j=c.length;h<j;h++)if(!c[h].isReady){d.unbind("h5controllerready.emulatepageshow").one("h5controllerready.emulatepageshow",function(){a.mobile.activePage[0]===d[0]&&d.trigger("h5jqmpageshow",{prevPage:f})});b=!0;break}b||d.trigger("h5jqmpageshow",{prevPage:f})},"{rootElement} h5controllerbound":function(c){c=c.evArg;if(this!==c){var b=h();null===b||-1!==a.inArray(c,D[b])||(u[b]||(u[b]=[]),u[b].push(c))}},"{rootElement} h5controllerunbound":function(c){var b=c.evArg,
c=h();null!==c&&(b=a.inArray(b,u[c]),-1!==b&&u[c].splice(b,1))},loadScript:function(c){var c=a("#"+c),b=a.trim(c.data(this.getDataAttribute("script")));if(0!==b.length)return b=a.map(b.split(","),function(b){return a.trim(b)}),c=!0==c.data(this.getDataAttribute("async")),f.u.loadScript(b,{async:c})},getDataAttribute:function(a){var b=f.ui.jqm.dataPrefix;null==b&&(b="h5");return 0!==b.length?b+"-"+a:a},bindController:function(a){var b=v[a],d=w[a];if(b&&0!==b.length){D[a]||(D[a]=[]);for(var h=D[a],
j=0,k=b.length;j<k;j++){for(var e=b[j],o=!1,p=0,m=h.length;p<m;p++){var r=h[p];if(r&&r.__name===e.__name){o=!0;break}}o||D[a].push(f.core.controller("#"+a,e,d[j]))}}},addCSS:function(c){if(c=r[c])for(var b=document.getElementsByTagName("head")[0],d=b.getElementsByTagName("link"),f=d.length,h=0,j=c.length;h<j;h++){for(var e=a.mobile.path.parseUrl(c[h]).filename,k=!1,o=0;o<f;o++)if(a.mobile.path.parseUrl(d[o].href).filename===e){k=!0;break}k||(e=document.createElement("link"),e.type="text/css",e.rel=
"stylesheet",e.href=c[h],b.appendChild(e))}},removeCSS:function(c){var b=r[c];if(b&&(c=h(),null!==c)){var d=r[c];a("link").filter(function(){var c=a(this).attr("href");return-1!==a.inArray(c,b)&&-1===a.inArray(c,d)}).remove()}}};f.u.obj.expose("h5.ui.jqm.manager",{init:function(){p||(p=!0,z=0<=o(a.mobile.version,"1.4"),a(document).one("pageshow",function(){s=!0}),a(function(){I=db.controllerInternal("body",B,null,{managed:!1});C()}))},define:function(c,b,f,l){x(c)||d(12E3,"id");null!=b&&!x(b)&&!J(b)&&
d(12E3,"cssSrc");null!=f&&((x(f)||J(f))&&d(12001),(!a.isPlainObject(f)||!("__name"in f))&&d(12E3,"controllerDefObject"),null!=l&&!a.isPlainObject(l)&&d(12E3,"initParam"));r[c]||(r[c]=[]);v[c]||(v[c]=[]);w[c]||(w[c]=[]);a.merge(r[c],a.map(a.makeArray(b),function(b){return a.inArray(b,r[c])!==-1?null:b}));f&&-1===a.inArray(f,v[c])&&(v[c].push(f),w[c].push(l));p&&null!==h()?C():this.init()}})})();(function(){function h(){o||(o=navigator.geolocation);return o}function C(a,d){this.oblateness=a;this.semiMajorAxis=
d}function k(){}var o=null,z=f.env.ua;C.prototype.getOblateness=function(){return this.oblateness};C.prototype.getSemiMajorAxis=function(){return this.semiMajorAxis};var x=new C(298.257222,6378137),v=new C(299.152813,6377397.155),D=Math.PI/180;a.extend(k.prototype,{isSupported:z.isIE&&9<=z.browserVersion?!0:!!h(),getCurrentPosition:function(a){var d=f.async.deferred();h().getCurrentPosition(function(a){d.resolve(a)},function(a){d.reject(Z(2002,null,a))},a);return d.promise()},watchPosition:function(a){function d(){}
var k=f.async.deferred(),o=h().watchPosition(function(a){k.notify(a)},function(a){h().clearWatch(o);k.reject(Z(2002,null,a))},a);d.prototype.unwatch=function(){h().clearWatch(o);k.resolve()};return k.promise(new d)},getDistance:function(a,f,h,k,j){(!isFinite(a)||!isFinite(f)||!isFinite(h)||!isFinite(k))&&d(2E3);var o=j?j:x;o instanceof C||d(2001);var j=o.getSemiMajorAxis(),v=o.getOblateness(),a=a*D,f=f*D,h=h*D,o=k*D,k=(a+h)/2,v=Math.sqrt(2*v-1)/v,v=Math.pow(v,2),c=Math.sqrt(1-v*Math.pow(Math.sin(k),
2)),v=j*(1-v)/Math.pow(c,3),j=j/c,f=f-o;return Math.sqrt(Math.pow(v*(a-h),2)+Math.pow(j*Math.cos(k)*f,2))},GS_GRS80:x,GS_BESSEL:v});f.u.obj.expose("h5.api",{geo:new k})})();(function(){function h(a){if(a){var c=a.deferred;(la(c)||Ca(c)||!a.result)&&d(p)}}function C(b,c,f){if(a.isPlainObject(b))for(var h in b){var k=a.trim(h).replace(/ +/g," ").split(" "),e=[];""===k[0]?d(s):1===k.length?(e.push(k[0]),e.push("="),e.push("?")):/^(<=|<|>=|>|=|!=|like)$/i.test(k[1])?3===k.length&&/^like$/i.test(k[1])?
(e.push(k[0]),e.push(k[1]),e.push("?"),e.push("ESCAPE"),e.push('"'+k[2]+'"')):(e.push(k[0]),e.push(k[1]),e.push("?")):d(j);c.push(e.join(" "));f.push(b[h])}}function k(){}function o(){this._multiple=!1}function z(a){this._db=a;this._df=B();this._tx=null;this._tasks=[];this._queue=[]}function I(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._columns=J(d)?d.join(", "):"*";this._orderBy=this._where=null}function v(a,c,d){this._statements=[];this._parameters=[];
this._executor=a;this._tableName=c;this._values=d?L(d):[];this._df=B();this._multiple=!0}function D(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._values=d;this._where=null}function u(a,c){this._statements=[];this._parameters=[];this._executor=a;this._tableName=c;this._where=null}function w(a,c,d){this._statements=[];this._parameters=[];this._executor=a;this._statements.push(c);this._parameters.push(d||[])}function r(a){this._db=a}var p=3E3,j=3003,s=3011,B=
f.async.deferred,c=f.u.str.format;a.extend(o.prototype,{execute:function(){return this._executor.add(this)._execute(function(a){return a[0]})}});a.extend(z.prototype,{_runTransaction:function(){return null!=this._tx},_addTask:function(a){this._tasks.push({deferred:a,result:null})},_setResult:function(a){this._getRecentTask().result=a},_getRecentTask:function(){return this._tasks[this._tasks.length-1]},add:function(a){a instanceof o||d(3009);var c=this._getRecentTask();(!c||c.result)&&this._queue.push(a);
return this},_execute:function(a){function c(){if(0===k.length){var h=a(e);d._setResult.apply(d,[h]);f.notify(h,d)}else{for(var j=k.shift(),m=j._statements,o=j._parameters,p=B().resolve().promise(),h=[],r=0,s=m.length;r<s;r++)(function(a,b){p=X(p,function(){var c=B();d._tx.executeSql(a,b,function(a,b){h.push(j._onComplete(b));c.resolve()});return c.promise()})})(m[r],o[r]);X(p,function(){e.push(j._multiple?h:h[0]);c()})}}var d=this,f=this._df,k=this._queue,e=[];try{h(this._getRecentTask());this._addTask(f);
for(var j=0,o=k.length;j<o;j++)k[j]._buildStatementAndParameters();this._runTransaction()?c():this._db.transaction(function(a){d._tx=a;c()},function(a){d._tx=null;for(var b=d._tasks,c=b.length-1;0<=c;c--)b[c].deferred.reject(Z(3010,["SQLDB ERROR(code="+a.code+")",a.message],a))},function(){d._tx=null;for(var a=d._tasks,b=a.length-1;0<=b;b--){var c=a[b];c.deferred.resolve(c.result)}})}catch(m){f.reject(m)}this._df=B();return f.promise()},execute:function(){return this._execute(function(a){return a})},
promise:function(){return this._df.promise()}});I.prototype=new o;a.extend(I.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&d(3004,["Select","where"]);this._where=b;return this},orderBy:function(b){!a.isPlainObject(b)&&!x(b)&&d(3004,["Select","orderBy"]);this._orderBy=L(b);return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=c("SELECT {0} FROM {1}",this._columns,this._tableName);if(a.isPlainObject(d)){var f=[];C(d,f,this._parameters);b+=" WHERE "+f.join(" AND ")}else x(d)&&
(b+=" WHERE "+d);J(this._orderBy)&&(b+=" ORDER BY "+this._orderBy.join(", "));this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rows}});v.prototype=new o;a.extend(v.prototype,{_buildStatementAndParameters:function(){var b=this._values,d=this._statements,f=this._parameters;if(0===b.length)d.push(c("INSERT INTO {0} DEFAULT VALUES",this._tableName)),f.push([]);else for(var h=0,k=b.length;h<k;h++){var e=b[h];if(null==e)d.push(c("INSERT INTO {0} DEFAULT VALUES",
this._tableName)),f.push([]);else if(a.isPlainObject(e)){var j=[],o=[],m=[],p;for(p in e)j.push("?"),o.push(p),m.push(e[p]);d.push(c("INSERT INTO {0} ({1}) VALUES ({2})",this._tableName,o.join(", "),j.join(", ")));f.push(m)}}},_onComplete:function(a){return a.insertId}});D.prototype=new o;a.extend(D.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&d(3004,["Update","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,b=this._values,f=[],h;for(h in b)f.push(h+
" = ?"),this._parameters.push(b[h]);b=c("UPDATE {0} SET {1}",this._tableName,f.join(", "));a.isPlainObject(d)?(h=[],C(d,h,this._parameters),b+=" WHERE "+h.join(" AND ")):x(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});u.prototype=new o;a.extend(u.prototype,{where:function(b){!a.isPlainObject(b)&&!x(b)&&d(3004,["Del","where"]);this._where=b;return this},_buildStatementAndParameters:function(){var b="",d=this._where,
b=c("DELETE FROM {0}",this._tableName);if(a.isPlainObject(d)){var f=[];C(d,f,this._parameters);b+=" WHERE "+f.join(" AND ")}else x(d)&&(b+=" WHERE "+d);this._statements.push([b]);this._parameters=[this._parameters]},_onComplete:function(a){return a.rowsAffected}});w.prototype=new o;a.extend(w.prototype,{_buildStatementAndParameters:function(){},_onComplete:function(a){return a}});a.extend(r.prototype,{select:function(a,c,f){x(a)||d(3001,"select");!J(c)&&"*"!==c&&d(3005,"select");return new I(this.transaction(f),
a,c)},insert:function(b,c,f){x(b)||d(3001,"insert");null!=c&&!J(c)&&!a.isPlainObject(c)&&d(3006,"insert");return new v(this.transaction(f),b,c)},update:function(b,c,f){x(b)||d(3001,"update");a.isPlainObject(c)||d(3006,"update");return new D(this.transaction(f),b,c)},del:function(a,c){x(a)||d(3001,"del");return new u(this.transaction(c),a)},sql:function(a,c,f){x(a)||d(3007,"sql");null!=c&&!J(c)&&d(3008,"sql");return new w(this.transaction(f),a,c)},transaction:function(a){void 0!=a&&!(a instanceof z)&&
d(3002,"transaction");return a?a:new z(this._db)}});a.extend(k.prototype,{isSupported:!!window.openDatabase,open:function(a,c,d,f){if(this.isSupported)return a=openDatabase(a,c,d,f),new r(a)}});f.u.obj.expose("h5.api",{sqldb:new k})})();(function(){function d(a){this._storage=a}a.extend(d.prototype,{getLength:function(){return this._storage.length},key:function(a){return this._storage.key(a)},getItem:function(a){a=this._storage.getItem(a);return null===a?null:f.u.obj.deserialize(a)},setItem:function(a,
d){this._storage.setItem(a,f.u.obj.serialize(d))},removeItem:function(a){this._storage.removeItem(a)},clear:function(){this._storage.clear()},each:function(a){for(var d=this._storage,f=0,h=d.length;f<h;f++){var x=d.key(f);a(f,x,this.getItem(x))}}});f.u.obj.expose("h5.api.storage",{isSupported:window.localStorage?function(){try{return window.localStorage.setItem("__H5_WEB_STORAGE_CHECK__","ok"),window.localStorage.removeItem("__H5_WEB_STORAGE_CHECK__"),!0}catch(a){return!1}}():!1,local:new d(window.localStorage),
session:new d(window.sessionStorage)})})()})(jQuery);